/*
Navicat MySQL Data Transfer

Source Server         : 本地
Source Server Version : 50720
Source Host           : localhost:3306
Source Database       : atomic

Target Server Type    : MYSQL
Target Server Version : 50720
File Encoding         : 65001

Date: 2019-07-31 15:44:38
*/

SET FOREIGN_KEY_CHECKS=0;

-- ----------------------------
-- Table structure for hadoop_default_tenant
-- ----------------------------
DROP TABLE IF EXISTS `hadoop_default_tenant`;
CREATE TABLE `hadoop_default_tenant` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '唯一标识',
  `tenant` varchar(50) DEFAULT NULL COMMENT '租户名',
  `tenant_group` varchar(50) DEFAULT NULL COMMENT '租户组',
  `platform_id` int(11) DEFAULT NULL COMMENT 'Hadoop注册平台ID',
  `have_kerberos` int(11) DEFAULT NULL COMMENT '是否开启kerberos认证',
  `kerberos_principal` varchar(50) DEFAULT NULL COMMENT 'Kerberos认证Principal名',
  `keytab_file_name` varchar(50) DEFAULT NULL,
  `keytab_file` blob COMMENT 'Kerberos认证 keytab文件',
  `krb5_conf_name` varchar(50) DEFAULT NULL,
  `krb5_conf_file` blob,
  PRIMARY KEY (`id`),
  KEY `fk_platform_id` (`platform_id`) USING BTREE,
  CONSTRAINT `hadoop_default_tenant_ibfk_1` FOREIGN KEY (`platform_id`) REFERENCES `hadoop_platform` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 COMMENT='Hadoop集群代理租户';

-- ----------------------------
-- Records of hadoop_default_tenant
-- ----------------------------
INSERT INTO `hadoop_default_tenant` VALUES ('1', 'oozieweb', 'oozieweb', '2', null, 'oozieweb@ADSERV.COM', 'oozieweb.keytab', 0x05020000003D0001000A4144534552562E434F4D00086F6F7A6965776562000000015C41858402001000185225CE980B7FBCF7E00DCE1626EA94B5B9E3D00BBC45CED0000000350001000A4144534552562E434F4D00086F6F7A6965776562000000015C4185840200170010FD4C0C0D217E6996BE99E9DE488A8B780000002D0001000A4144534552562E434F4D00086F6F7A6965776562000000015C4185840200080008A40D01BF13492A2F0000002D0001000A4144534552562E434F4D00086F6F7A6965776562000000015C4185840200030008801F7661A7A75770, 'krb5.conf', 0x5B6C696264656661756C74735D0A64656661756C745F7265616C6D203D204144534552562E434F4D0A646E735F6C6F6F6B75705F6B6463203D20747275650A646E735F6C6F6F6B75705F7265616C6D203D2066616C73650A7469636B65745F6C69666574696D65203D2038363430300A72656E65775F6C69666574696D65203D203630343830300A666F727761726461626C65203D20747275650A64656661756C745F7467735F656E637479706573203D20646573332D686D61632D7368613120617263666F75722D686D6163206465732D686D61632D73686131206465732D6362632D6D6435206465732D6362632D6372630A64656661756C745F746B745F656E637479706573203D20646573332D686D61632D7368613120617263666F75722D686D6163206465732D686D61632D73686131206465732D6362632D6D6435206465732D6362632D6372630A7065726D69747465645F656E637479706573203D20646573332D686D61632D7368613120617263666F75722D686D6163206465732D686D61632D73686131206465732D6362632D6D6435206465732D6362632D6372630A7564705F707265666572656E63655F6C696D6974203D20310A5B7265616C6D735D0A4144534552562E434F4D203D207B0A6B6463203D206861646F6F70370A61646D696E5F736572766572203D206861646F6F70370A7D0A);
INSERT INTO `hadoop_default_tenant` VALUES ('2', 'atomic', 'atomic', '1', null, null, null, null, null, null);
INSERT INTO `hadoop_default_tenant` VALUES ('3', 'atomic', 'atomic', '3', null, 'atomic@CLOUDERA', 'atomic.keytab', 0x05020000003100010008434C4F5544455241000661746F6D6963000000015D31353F0300110010C0372FAFB2B1CE6C9E788895A426720D0000003900010008434C4F5544455241000661746F6D6963000000015D31353F0300100018013E52F1EC5D51765807C8A81F087F98B08C9725DF267A8F0000003100010008434C4F5544455241000661746F6D6963000000015D31353F0300170010C78FB4EFF318EEB90B75EA7FD10DD6570000002900010008434C4F5544455241000661746F6D6963000000015D31353F0300080008DCA4F8080BD5409E0000002900010008434C4F5544455241000661746F6D6963000000015D31353F030003000820916DE69EA87620, 'krb5.conf', 0x5B6C6F6767696E675D0A2064656661756C74203D2046494C453A2F7661722F6C6F672F6B7262356C6962732E6C6F670A206B6463203D2046494C453A2F7661722F6C6F672F6B7262356B64632E6C6F670A2061646D696E5F736572766572203D2046494C453A2F7661722F6C6F672F6B61646D696E642E6C6F670A0A5B6C696264656661756C74735D0A2064656661756C745F7265616C6D203D20434C4F55444552410A20646E735F6C6F6F6B75705F7265616C6D203D2066616C73650A20646E735F6C6F6F6B75705F6B6463203D2066616C73650A207469636B65745F6C69666574696D65203D203234680A2072656E65775F6C69666574696D65203D2037640A20666F727761726461626C65203D20747275650A0A5B7265616C6D735D0A20434C4F5544455241203D207B0A20206B6463203D20717569636B73746172742E636C6F75646572610A202061646D696E5F736572766572203D20717569636B73746172742E636C6F75646572610A20206D61785F72656E657761626C655F6C696665203D20376420306820306D2030730A202064656661756C745F7072696E636970616C5F666C616773203D202B72656E657761626C650A207D0A0A5B646F6D61696E5F7265616C6D5D0A202E636C6F7564657261203D20434C4F55444552410A20636C6F7564657261203D20434C4F55444552410A);

-- ----------------------------
-- Table structure for hadoop_platform
-- ----------------------------
DROP TABLE IF EXISTS `hadoop_platform`;
CREATE TABLE `hadoop_platform` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) DEFAULT NULL COMMENT 'Hadoop平台名称',
  `hadoop_version` varchar(50) DEFAULT NULL,
  `default_fS` varchar(50) DEFAULT NULL COMMENT '默认HDFS协议串',
  `job_tracker` varchar(50) DEFAULT NULL COMMENT 'JobTracker',
  `hadoop_config` varchar(2000) DEFAULT NULL COMMENT 'Hadoop Conf配置信息（Json串）',
  `rm_url` varchar(255) DEFAULT NULL COMMENT 'Resource Manager地址',
  `hs_url` varchar(255) DEFAULT NULL COMMENT 'History Server地址',
  `hive_jdbc_url` varchar(255) DEFAULT NULL COMMENT 'Hive Jdbc Url地址',
  `impala_url` varchar(255) DEFAULT NULL COMMENT 'Impala Url地址',
  `oozie_url` varchar(255) DEFAULT NULL COMMENT 'Oozie Server Url地址',
  `oozie_mysql_url` varchar(200) DEFAULT NULL COMMENT 'Oozie Server Mysql ip地址',
  `oozie_mysql_user` varchar(50) DEFAULT NULL COMMENT 'Oozie Server Mysql用户名',
  `oozie_mysql_passwd` varchar(50) DEFAULT NULL COMMENT 'Oozie Server Mysql密码',
  `is_security` varchar(2) DEFAULT NULL COMMENT '是否为开启kerberos认证:1开启kerberos认证，0未开启',
  `is_enable` varchar(2) DEFAULT NULL COMMENT 'Hadoop平台是否启用',
  `create_user` varchar(40) DEFAULT NULL COMMENT '创建者',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  `update_user` varchar(40) DEFAULT NULL COMMENT '更新者',
  `update_time` datetime DEFAULT NULL COMMENT '更新时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 COMMENT='Hadoop平台模型';

-- ----------------------------
-- Records of hadoop_platform
-- ----------------------------
INSERT INTO `hadoop_platform` VALUES ('1', 'Teradata大数据集群平台', 'CDH5.13.1', 'hdfs://quickstart.cloudera:8020', null, null, null, null, null, null, null, null, null, null, '0', '1', 'admin', '2019-04-20 20:32:31', 'admin', '2019-04-22 17:42:07');
INSERT INTO `hadoop_platform` VALUES ('2', '大数据测试环境', 'CDH5.8.3', 'hdfs://nameservice1', null, '{ \"dfs.nameservices\": \"nameservice1\", \"dfs.ha.namenodes.nameservice1\": \"namenode66,namenode73\", \"dfs.namenode.rpc-address.nameservice1.namenode73\": \"hadoop6:8020\", \"dfs.namenode.rpc-address.nameservice1.namenode66\": \"hadoop5:8020\", \"dfs.client.failover.proxy.provider.nameservice1\": \"org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider\" }', null, null, null, null, null, null, null, null, '1', '1', 'admin', '2019-04-20 20:33:10', 'admin', '2019-04-23 09:48:09');
INSERT INTO `hadoop_platform` VALUES ('3', '笔记本测试环境', 'CDH5.13.0', 'hdfs://quickstart.cloudera:8020', 'quickstart.cloudera:8032', null, 'http://quickstart.cloudera:8088', 'http://quickstart.cloudera:19888', 'jdbc:hive2://quickstart.cloudera:10000/default;principal=hive/quickstart.cloudera@CLOUDERA', null, 'http://quickstart:11000/oozie', 'jdbc:mysql://192.168.20.203:3306/atomic?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=true&serverTimezone=GMT%2B8', 'root', 'cloudera', '1', '1', 'admin', '2019-05-03 19:13:45', 'admin', '2019-07-18 16:17:29');

-- ----------------------------
-- Table structure for hadoop_project
-- ----------------------------
DROP TABLE IF EXISTS `hadoop_project`;
CREATE TABLE `hadoop_project` (
  `project_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '唯一标识',
  `name_en` varchar(50) DEFAULT NULL,
  `name_cn` varchar(50) DEFAULT NULL COMMENT '项目名称',
  `project_version` varchar(50) DEFAULT NULL COMMENT '项目版本',
  `description` varchar(1000) DEFAULT NULL COMMENT '项目描述',
  `demander_dept_id` int(11) DEFAULT NULL COMMENT '客户',
  `demander_user_id` int(11) DEFAULT NULL COMMENT '项目经理',
  `project_size` double unsigned zerofill DEFAULT NULL COMMENT '项目规模',
  `project_effort` double unsigned zerofill DEFAULT NULL COMMENT '工作量',
  `project_schedule` double unsigned zerofill DEFAULT NULL COMMENT '项目进度',
  `project_status` int(4) unsigned zerofill DEFAULT NULL COMMENT '项目状态',
  `platform_id` int(11) DEFAULT NULL COMMENT '大数据平台',
  `tenant_id` int(11) DEFAULT NULL COMMENT '租户',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  `create_user` varchar(30) DEFAULT NULL COMMENT '创建人',
  `update_time` datetime DEFAULT NULL COMMENT '更新时间',
  `update_user` varchar(30) DEFAULT NULL COMMENT '更新人',
  PRIMARY KEY (`project_id`),
  KEY `fk_tenant_id` (`tenant_id`) USING BTREE,
  CONSTRAINT `hadoop_project_ibfk_1` FOREIGN KEY (`tenant_id`) REFERENCES `hadoop_tenant` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 COMMENT='工程项目';

-- ----------------------------
-- Records of hadoop_project
-- ----------------------------
INSERT INTO `hadoop_project` VALUES ('1', 'BP', 'B域数据', 'V1.0（一期）', '大数据平台数据迁移项目，主要目标是将传统数仓模型数据迁移至大数据平台，并核对模型数据质量。', '103', '100', '0000000000000000000500', '0000000000000000000500', '0000000000000000000020', '0001', '3', '4', '2019-04-27 10:41:30', 'atomic', '2019-05-18 09:03:44', 'admin');
INSERT INTO `hadoop_project` VALUES ('3', 'OP', 'O域数据', 'v1', 'v1fdfd', '110', '2', '0000000000000000011122', '0000000000000000000011', '0000000000000000040.23', '0001', '2', '3', '2019-04-29 22:43:32', 'admin', '2019-04-30 17:17:00', 'admin');

-- ----------------------------
-- Table structure for hadoop_project_dept
-- ----------------------------
DROP TABLE IF EXISTS `hadoop_project_dept`;
CREATE TABLE `hadoop_project_dept` (
  `project_id` int(11) NOT NULL COMMENT '工程项目',
  `dept_id` bigint(11) NOT NULL COMMENT '组织',
  PRIMARY KEY (`project_id`,`dept_id`),
  KEY `fk_dept_id` (`dept_id`) USING BTREE,
  CONSTRAINT `hadoop_project_dept_ibfk_1` FOREIGN KEY (`dept_id`) REFERENCES `sys_dept` (`dept_id`),
  CONSTRAINT `hadoop_project_dept_ibfk_2` FOREIGN KEY (`project_id`) REFERENCES `hadoop_project` (`project_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='组织与工程关系表';

-- ----------------------------
-- Records of hadoop_project_dept
-- ----------------------------
INSERT INTO `hadoop_project_dept` VALUES ('1', '100');
INSERT INTO `hadoop_project_dept` VALUES ('3', '100');
INSERT INTO `hadoop_project_dept` VALUES ('1', '101');
INSERT INTO `hadoop_project_dept` VALUES ('3', '101');
INSERT INTO `hadoop_project_dept` VALUES ('1', '102');
INSERT INTO `hadoop_project_dept` VALUES ('3', '102');
INSERT INTO `hadoop_project_dept` VALUES ('1', '103');
INSERT INTO `hadoop_project_dept` VALUES ('3', '103');
INSERT INTO `hadoop_project_dept` VALUES ('1', '110');
INSERT INTO `hadoop_project_dept` VALUES ('3', '110');
INSERT INTO `hadoop_project_dept` VALUES ('1', '112');

-- ----------------------------
-- Table structure for hadoop_tenant
-- ----------------------------
DROP TABLE IF EXISTS `hadoop_tenant`;
CREATE TABLE `hadoop_tenant` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '唯一标识',
  `tenant` varchar(50) DEFAULT NULL COMMENT '租户名',
  `tenant_group` varchar(50) DEFAULT NULL COMMENT '租户组',
  `platform_id` int(11) DEFAULT NULL COMMENT '所属的Hadoop平台ID',
  `is_poxyuser` int(11) DEFAULT NULL COMMENT '是否为HDFS代理用户:1是,0否',
  `keytab_file` varchar(255) DEFAULT NULL COMMENT 'keytab文件路径',
  `yarn_queue` varchar(40) DEFAULT NULL COMMENT 'Yarn资源队列',
  `is_enable` varchar(2) DEFAULT NULL COMMENT '是否启用',
  `create_user` varchar(50) DEFAULT NULL COMMENT '创建者',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  `update_user` varchar(50) DEFAULT NULL COMMENT '更新者',
  `update_time` datetime DEFAULT NULL COMMENT '更新时间',
  PRIMARY KEY (`id`),
  KEY `fk_platfor_id` (`platform_id`) USING BTREE,
  CONSTRAINT `hadoop_tenant_ibfk_1` FOREIGN KEY (`platform_id`) REFERENCES `hadoop_platform` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8 COMMENT='Hadoop平台租户模型';

-- ----------------------------
-- Records of hadoop_tenant
-- ----------------------------
INSERT INTO `hadoop_tenant` VALUES ('1', 'atomic', 'atomic', '1', '1', '/user/atomic/atomic.keytab', 'atomic', '1', 'admin', '2019-04-20 20:40:06', null, null);
INSERT INTO `hadoop_tenant` VALUES ('2', 'oozieweb', 'oozieweb', '1', '0', '/user/oozieweb/oozieweb.keytab', 'oozieweb', '1', 'admin', '2019-04-20 20:40:36', null, null);
INSERT INTO `hadoop_tenant` VALUES ('3', 'cdrapp', 'cdrapp', '2', '0', '/user/cdrapp/cdrapp.keytab', 'cdrapp, oozieweb', '1', 'admin', '2019-04-20 20:41:00', null, null);
INSERT INTO `hadoop_tenant` VALUES ('4', 'atomic', 'atomic', '3', '1', null, 'atomic', '1', 'admin', '2019-05-17 16:56:43', null, null);

-- ----------------------------
-- Table structure for oozie_credential
-- ----------------------------
DROP TABLE IF EXISTS `oozie_credential`;
CREATE TABLE `oozie_credential` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '编码',
  `platform_id` int(11) NOT NULL COMMENT '平台编码',
  `name` varchar(200) DEFAULT NULL COMMENT '名称',
  `type` varchar(10) DEFAULT NULL COMMENT '类型',
  `principal` varchar(200) NOT NULL COMMENT '规则',
  `url` varchar(200) NOT NULL COMMENT '链接',
  `create_user` varchar(50) DEFAULT NULL COMMENT '创建人',
  `create_time` timestamp NULL DEFAULT NULL COMMENT '创建时间',
  `update_user` varchar(50) DEFAULT NULL COMMENT '更新人',
  `update_time` timestamp NULL DEFAULT NULL COMMENT '更新时间',
  PRIMARY KEY (`id`),
  KEY `fk_platform_id` (`platform_id`),
  CONSTRAINT `fk_platform_id` FOREIGN KEY (`platform_id`) REFERENCES `hadoop_platform` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=44 DEFAULT CHARSET=utf8 COMMENT='Oozie安全认证凭据';

-- ----------------------------
-- Records of oozie_credential
-- ----------------------------
INSERT INTO `oozie_credential` VALUES ('18', '2', 'hbase', 'hbase', 'hbase', 'hbase', 'admin', '2019-05-16 15:23:18', null, null);
INSERT INTO `oozie_credential` VALUES ('19', '1', 'hbase', 'hbase', 'hbase', 'hbase', 'admin', '2019-05-16 15:24:00', null, null);
INSERT INTO `oozie_credential` VALUES ('41', '3', 'hive2_credential', 'hive2', 'hive/quickstart.cloudera@CLOUDERA', 'jdbc:hive2://quickstart.cloudera:10000/default', 'admin', '2019-07-19 11:18:40', null, null);
INSERT INTO `oozie_credential` VALUES ('42', '3', 'hcat_credential', 'hcat', 'hive/_HOST@CLOUDERA', 'thirft://quickstart.cloudera:9083', 'admin', '2019-07-19 11:18:40', null, null);
INSERT INTO `oozie_credential` VALUES ('43', '3', 'hbase', 'hbase', 'hbase', 'hbase', 'admin', '2019-07-19 11:18:40', null, null);

-- ----------------------------
-- Table structure for oozie_hive_sql
-- ----------------------------
DROP TABLE IF EXISTS `oozie_hive_sql`;
CREATE TABLE `oozie_hive_sql` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '唯一标识',
  `version` int(11) DEFAULT NULL COMMENT '版本号',
  `task_id` varchar(40) DEFAULT NULL COMMENT '任务标识',
  `node_id` varchar(40) DEFAULT NULL COMMENT '节点标识',
  `hsql` text COMMENT 'hsql脚本',
  `hsql_path` varchar(255) DEFAULT NULL COMMENT '脚本存储路径',
  `script_type` varchar(20) DEFAULT NULL COMMENT '脚本类型',
  `create_user` varchar(40) DEFAULT NULL COMMENT '创建者',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  `update_user` varchar(40) DEFAULT NULL COMMENT '更新者',
  `update_time` datetime DEFAULT NULL COMMENT '更新时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=19 DEFAULT CHARSET=utf8 COMMENT='Hive SQL脚本存储表';

-- ----------------------------
-- Records of oozie_hive_sql
-- ----------------------------
INSERT INTO `oozie_hive_sql` VALUES ('9', null, '11', '3', 'set mapred.job.queue.name=cdrapp;%2Eset hive.groupby.orderby.position.alias = true;%2E%2EDROP TABLE IF EXISTS PMID3.TB_MID_PAR_BD_USER_DAY;%2E%2ECREATE TABLE IF NOT EXISTS PMID3.TB_MID_PAR_BD_USER_DAY(%2E DEAL_DATE STRING COMMENT \'处理日期\'%2E,USER_ID DECIMAL(14,0) COMMENT \'用户ID\'%2E,PHONE_NO STRING COMMENT \'手机号码\'%2E,REGION_CODE STRING COMMENT \'地市代码\'%2E,CITY_CODE STRING COMMENT \'区县代码\'%2E,SITE_CODE STRING COMMENT \'归属营业厅代码\'%2E,INNET_DATE STRING COMMENT \'入网日期\'%2E,USER_STAT_CODE STRING COMMENT \'用户状态代码\'%2E,PROD_PRC_ID STRING COMMENT \'产品资费代码\'%2E,BILL_CYCLE INT COMMENT \'计费周期\'%2E,PRICE DECIMAL(10,2) COMMENT \'价格\'%2E,BRODM_NUM DECIMAL(8,0) COMMENT \'宽带M数\'%2E,BROD_BDWTH DECIMAL(8,0) COMMENT \'宽带带宽\'%2E,BROD_SPEED_PRC_CODE STRING COMMENT \'宽带提速包资费代码\'%2E,ISNT_RAILCOM STRING COMMENT \'是否与铁通协同发展的宽带客户\'%2E,ISNT_FUSION_BROD STRING COMMENT \'是否融合宽带\'%2E,FUSION_TYPE STRING COMMENT \'融合类型\'%2E,ISNT_PHONE_NO_BIND STRING COMMENT \'是否手机号码捆绑\'%2E,CONN_METHD STRING COMMENT \'连接方式\'%2E,COVER_TYPE STRING COMMENT \'覆盖类型\'%2E,BIND_PHONE_USER_NUM DECIMAL(1,0) COMMENT \'捆绑手机用户数\'%2E,BASS_PAY_METHD STRING COMMENT \'一经付费方式\'%2E,EXTND_ATTR_FIELD STRING COMMENT \'扩展属性字段\'%2E,PROD_EFF_DATE STRING COMMENT \'产品生效日期\'%2E,PROD_EXP_DATE STRING COMMENT \'产品失效日期\'%2E,ORDER_DATE STRING COMMENT \'订购日期\'%2E,CNTRT_EXPIRE_DATE STRING COMMENT \'合约到期日期\'%2E,CNTRT_CYCLE DECIMAL(22,0) COMMENT \'合约周期\'%2E,BSPOK_PRC_ORDER_DATE STRING COMMENT \'预约资费订购日期\'%2E,MAX_ORDER_DATE STRING COMMENT \'最大订购日期\'%2E,CELL_ID STRING COMMENT \'小区id\'%2E,CELL_NAME STRING COMMENT \'小区名称\'%2E,CONTACT_PHONE_NO STRING COMMENT \'联系人手机号码\'%2E)%2ECOMMENT \'家庭宽带用户日表\'%2ESTORED AS PARQUET TBLPROPERTIES(\"PARQUET.COMPRESSION\"=\"SNAPPY\");%2E%2E--说明：本脚本用于建立家庭宽带用户明细表 包含各种分类标记，便于以后统计使用%2E--TRUNCATE TABLE PMID3.TB_MID_PAR_BD_USER_DAY;%2E%2E--创建目标用户表%2EDROP TABLE IF EXISTS PMID3.TMP_PAR_KD_USER_BASE_DAY;%2E%2ECREATE TABLE IF NOT EXISTS PMID3.TMP_PAR_KD_USER_BASE_DAY(%2EUSER_ID DECIMAL(18,0),%2EPHONE_NO STRING,%2EREGION_CODE STRING,%2ECITY_CODE STRING,%2ESITE_CODE STRING,%2EINNET_DATE DATE,%2EUSER_STAT_CODE STRING,%2EPROD_PRCID STRING,%2EPRODT_EFF_DATE DATE,%2EPRODT_EXP_DATE DATE,%2EORDER_DATE DATE%2E)%2EROW FORMAT DELIMITED%2EFIELDS TERMINATED BY \'\\t\'%2ELINES TERMINATED BY \'\\n\';%2E%2EINSERT OVERWRITE TABLE PMID3.TMP_PAR_KD_USER_BASE_DAY%2ESELECT T1.USER_ID%2E ,T1.PHONE_NO%2E ,T1.REGION_CODE%2E ,T1.CITY_CODE%2E ,T1.SITE_CODE%2E ,T1.INNET_DATE%2E ,T1.USER_STAT_CODE%2E ,T1.PROD_PRC_ID%2E ,MAX(T1.PROD_EFF_DATE) AS PRODT_EFF_DATE%2E ,MAX(T1.PROD_EXP_DATE) AS PRODT_EXP_DATE%2E ,MAX(T1.OP_DATE) AS ORDER_DATE%2E FROM PMID3.TB_MID_PDT_ORDER_USER_DAY T1%2E INNER JOIN PDATA3.TB_PDT_PRC_INFO_DAY T2%2E ON T1.PROD_PRC_ID=T2.PROD_PRC_ID%2E AND BRAND_ID=\'kd\'%2E AND T2.DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\'%2E WHERE T1.PROD_EXP_DATE&gt;\'${hivevar:TX_DATE_FORMAT}\'%2E AND T1.PROD_EFF_DATE&lt;=\'${hivevar:TX_DATE_FORMAT}\'%2E AND T1.USER_TYPE_CODE&lt;&gt;\'02\'%2E AND T1.USER_STAT_CODE&lt;\'a\'%2E GROUP BY 1,2,3,4,5,6,7,8;%2E%2E--创建用户带宽实例表%2EDROP TABLE IF EXISTS PMID3.TMP_PAR_KD_USER_CNTM_DAY;%2E%2ECREATE TABLE IF NOT EXISTS PMID3.TMP_PAR_KD_USER_CNTM_DAY(%2EUSER_ID DECIMAL(18,0)%2E,ATTR_VALUE STRING%2E)%2EROW FORMAT DELIMITED%2EFIELDS TERMINATED BY \'\\t\'%2ELINES TERMINATED BY \'\\n\';%2E%2EINSERT OVERWRITE TABLE PMID3.TMP_PAR_KD_USER_CNTM_DAY%2ESELECT T1.USER_ID%2E ,MAX(T1.ATTR_VAL) AS ATTR_VALUE%2E FROM PDATA3.TB_PDT_SERV_ATTR_INFO_DAY T1%2E INNER JOIN ( select user_id%2E ,MAX(CAST(CONCAT(from_unixtime(unix_timestamp(T1.OP_DATE,\'yyyy-MM-dd\'),\'yyyyMMdd\'),substr(CONCAT(\'00000\',T1.OP_TIME),LENGTH(CONCAT(\'00000\',T1.OP_TIME))-5)) AS DECIMAL(16,0))) AS OPER_DATE_TIME%2E from PDATA3.TB_PDT_SERV_ATTR_INFO_DAY T1%2E where attr_id=\'BB0000262\'%2E AND UPPER(TRIM(T1.ATTR_VAL)) LIKE \'%M%\'%2E and op_date &lt;= \'${hivevar:TX_DATE_FORMAT}\'%2E and deal_date_p = \'${hivevar:TX_DATE_FORMAT}\'%2E group by 1)T2%2E ON T1.USER_ID=T2.USER_ID%2E AND CAST(CONCAT(from_unixtime(unix_timestamp(T1.OP_DATE,\'yyyy-MM-dd\'),\'yyyyMMdd\'),substr(CONCAT(\'00000\',T1.OP_TIME),LENGTH(CONCAT(\'00000\',T1.OP_TIME))-5)) AS DECIMAL(16,0))=T2.OPER_DATE_TIME%2E WHERE T1.attr_id=\'BB0000262\'%2E AND UPPER(TRIM(T1.ATTR_VAL)) LIKE \'%M%\'%2E AND op_date &lt;= \'${hivevar:TX_DATE_FORMAT}\'%2E AND deal_date_p=\'${hivevar:TX_DATE_FORMAT}\'%2E GROUP BY 1;%2E%2E----------------------------------------------------------------------------------------------------------------------------------------------------------------%2E-----add by zhaoxj in 20180621 增加营销活动合约时间 和 合约到期时间%2E------1 提取活动中涉及的宽带资费和活动合约期%2EDROP TABLE IF EXISTS PMID3.TMP_STAT_KD_ACT_PROD;%2E%2ECREATE TABLE IF NOT EXISTS PMID3.TMP_STAT_KD_ACT_PROD(%2EACT_ID STRING,%2EACTIVITY_NAME STRING,%2ECONTRACT_DATE DECIMAL(22,0),%2EMEANS_ID STRING,%2EPROD_PRCID STRING%2E)%2EROW FORMAT DELIMITED%2EFIELDS TERMINATED BY \'\\t\'%2ELINES TERMINATED BY \'\\n\';%2E%2E--CREATE TABLE IF NOT EXISTS PTEMP3.BOSS35_PD_PRCEXPIRE_DICT(%2E--PROD_PRCID STRING%2E--,GROUP_ID STRING%2E--,EXPIRE_TYPE STRING%2E--,AVAIL_DAY STRING%2E--,PREREMIND_DAY STRING%2E--,EFF_DATE STRING%2E--,EXP_DATE STRING%2E--,OP_TIME STRING%2E--,PROD_ID STRING%2E--)%2E--ROW FORMAT DELIMITED%2E--FIELDS TERMINATED BY \'\\t\'%2E--LINES TERMINATED BY \'\\n\';%2E%2EINSERT OVERWRITE TABLE PMID3.TMP_STAT_KD_ACT_PROD%2ESELECT a.SALE_ACT_CODE AS ACT_ID%2E ,b.ACT_NAME%2E ,b.contract_date%2E ,c.METHD_ID%2E ,c.prod_prc_id%2E FROM PDATA3.TB_MKT_ACT_MEANS_INFO_DAY a%2E INNER JOIN PDATA3.TB_MKT_ACT_INFO_DAY b%2E ON a.SALE_ACT_CODE=b.ACT_ID%2E AND b.CONTRACT_DATE &gt;\'0\'%2E AND b.DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\'%2E INNER JOIN (SELECT t1.METHD_ID,t2.prod_prc_id --元素参数值%2E FROM PDATA3.TB_MKT_MEANS_CNTNT_INFO_DAY t1 --营销方式内容表%2E INNER JOIN (select prod_prc_id,AVAIL_DAY from pcde3.tb_cde_pdt_bd_prc_dict group by 1,2) t2 --融合宽带资费%2E on substr(t1.ELEMENT_PARAM_VAL,1,8)=t2.prod_prc_id%2E AND T2.AVAIL_DAY =\'1\'%2E where t1.deal_date_p=\'${hivevar:TX_DATE_FORMAT}\'%2E GROUP BY 1,2%2E ) c%2E on a.MEANS_ID=c.METHD_ID%2E WHERE A.DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\';%2E%2E------2 活动推荐信息比对%2EDROP TABLE IF EXISTS PMID3.TMP1_STAT_KD_ACT_USER;%2ECREATE TABLE IF NOT EXISTS PMID3.TMP1_STAT_KD_ACT_USER%2E(%2ESERIAL_NO STRING%2E,KD_PHONE_NO STRING%2E,PROD_PRCID STRING%2E,REASON STRING%2E,REGISTER_DATE DATE%2E,REGISTER_TIME STRING%2E)%2EROW FORMAT DELIMITED%2EFIELDS TERMINATED BY \'\\t\'%2ELINES TERMINATED BY \'\\n\';%2E%2E%2EINSERT OVERWRITE TABLE PMID3.TMP1_STAT_KD_ACT_USER%2ESELECT T1.SEQN_NO --序列号%2E ,CASE WHEN TRIM(T1.FAV_ACPT_INFO)=\'\' THEN T1.WAS_RCMD_INFO ELSE T1.FAV_ACPT_INFO END AS KD_PHONE_NO%2E ,SUBSTR(T1.ACT_CODE,1,8) AS PROD_PRCID --活动代码%2E ,T1.RECEIVED_REASN%2E ,T1.LOGIN_DATE%2E ,T1.LOGIN_TIME%2E FROM PDATA3.TB_MKT_ACT_RCMD_INFO_DAY T1 --营销活动推荐信息表%2E INNER JOIN (select ACT_ID,PROD_PRCID from PMID3.TMP_STAT_KD_ACT_PROD group by 1,2) T2%2E ON T1.RECEIVED_REASN=T2.ACT_ID%2E AND SUBSTR(T1.ACT_CODE,1,8)=T2.PROD_PRCID%2E WHERE T1.FAV_ISNT_PRSNT_ID=\'Y\'%2E AND T1.DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\';%2E%2E------3 取宽带号码+宽带资费 最大流水的记录的一条记录%2EDROP TABLE IF EXISTS PMID3.TMP2_STAT_KD_ACT_USER;%2ECREATE TABLE IF NOT EXISTS PMID3.TMP2_STAT_KD_ACT_USER%2E(%2ESERIAL_NO STRING%2E,KD_PHONE_NO STRING%2E,PROD_PRCID STRING%2E,REGISTER_DATE DATE%2E,REGISTER_TIME STRING%2E,ACT_ID STRING%2E,ACTIVITY_NAME STRING%2E,MEANS_ID STRING%2E,CONTRACT_DATE DECIMAL(22,0)%2E)%2EROW FORMAT DELIMITED%2EFIELDS TERMINATED BY \'\\t\'%2ELINES TERMINATED BY \'\\n\';%2E%2EINSERT OVERWRITE TABLE PMID3.TMP2_STAT_KD_ACT_USER%2ESELECT T1.SERIAL_NO%2E ,T1.KD_PHONE_NO%2E ,T1.PROD_PRCID%2E ,T1.REGISTER_DATE%2E ,T1.REGISTER_TIME%2E ,T2.ACT_ID%2E ,T2.ACTIVITY_NAME%2E ,T2.MEANS_ID%2E ,T2.CONTRACT_DATE%2E FROM ( SELECT TT1.*%2E FROM PMID3.TMP1_STAT_KD_ACT_USER TT1%2E INNER JOIN (SELECT KD_PHONE_NO,PROD_PRCID,MAX(SERIAL_NO) AS SERIAL_NO%2E FROM PMID3.TMP1_STAT_KD_ACT_USER%2E GROUP BY 1,2) TT2%2E ON TT1.KD_PHONE_NO=TT2.KD_PHONE_NO%2E AND TT1.PROD_PRCID=TT2.PROD_PRCID%2E AND TT1.SERIAL_NO=TT2.SERIAL_NO%2E WHERE LENGTH(trim(TT1.KD_PHONE_NO))=11%2E ) T1%2E LEFT JOIN PMID3.TMP_STAT_KD_ACT_PROD T2%2E ON T1.REASON=T2.ACT_ID%2E AND T1.PROD_PRCID=T2.PROD_PRCID;%2E%2E------4 取宽带号码+宽带资费 的合约期%2EDROP TABLE IF EXISTS PMID3.TMP_STAT_KD_ACT_USER;%2ECREATE TABLE IF NOT EXISTS PMID3.TMP_STAT_KD_ACT_USER%2E(%2EKD_PHONE_NO STRING%2E,PROD_PRCID STRING%2E,CONTRACT_DATE DECIMAL(22,0)%2E)%2EROW FORMAT DELIMITED%2EFIELDS TERMINATED BY \'\\t\'%2ELINES TERMINATED BY \'\\n\';%2E%2EINSERT OVERWRITE TABLE PMID3.TMP_STAT_KD_ACT_USER%2ESELECT KD_PHONE_NO%2E ,PROD_PRCID%2E ,MAX(CONTRACT_DATE) AS CONTRACT_DATE%2E FROM PMID3.TMP2_STAT_KD_ACT_USER%2E GROUP BY 1,2;%2E%2E------5 创建结果表，在原表的基础上增加 合约周期和新的合约到期时间%2EDROP TABLE IF EXISTS PMID3.TMP1_PAR_KD_USER_DAY;%2ECREATE TABLE IF NOT EXISTS PMID3.TMP1_PAR_KD_USER_DAY%2E(%2EUSER_ID DECIMAL(14,0)%2E,PHONE_NO STRING%2E,PROD_PRCID STRING%2E,CONTRACT_DATE DECIMAL(22,0)%2E,NEW_ACT_EXP_DATE DATE%2E)%2EROW FORMAT DELIMITED%2EFIELDS TERMINATED BY \'\\t\'%2ELINES TERMINATED BY \'\\n\';%2E%2EINSERT OVERWRITE TABLE PMID3.TMP1_PAR_KD_USER_DAY%2ESELECT T1.USER_ID%2E ,T1.PHONE_NO%2E ,T1.PROD_PRCID%2E ,T2.CONTRACT_DATE%2E ,ADD_MONTHS(T1.PRODT_EFF_DATE,CAST(T2.CONTRACT_DATE AS INT)) AS NEW_ACT_EXP_DATE --发现有特殊用户13150876109有2条记录%2E FROM PMID3.TMP_PAR_KD_USER_BASE_DAY T1%2E INNER JOIN PMID3.TMP_STAT_KD_ACT_USER T2%2E ON T1.PHONE_NO=T2.KD_PHONE_NO%2E AND T1.PROD_PRCID=T2.PROD_PRCID;%2E%2E-----add by zhaoxj in 20180621 增加资费预约【剔除欠控资费】生效时间%2EDROP TABLE IF EXISTS PMID3.TMP_STAT_KD_PROD_ORDER;%2ECREATE TABLE IF NOT EXISTS PMID3.TMP_STAT_KD_PROD_ORDER%2E(%2EUSER_ID DECIMAL(14,0)%2E,PROD_PRCID STRING%2E,ORDER_DATE DATE%2E)%2EROW FORMAT DELIMITED%2EFIELDS TERMINATED BY \'\\t\'%2ELINES TERMINATED BY \'\\n\';%2E%2EINSERT OVERWRITE TABLE PMID3.TMP_STAT_KD_PROD_ORDER%2ESELECT T1.USER_ID%2E ,T1.PROD_PRC_ID%2E ,T1.ORDER_DATE%2E FROM PDATA3.TB_PDT_ORDER_HIS_DAY T1%2E INNER JOIN (SELECT USER_ID FROM PMID3.TMP_PAR_KD_USER_BASE_DAY group by 1) T2%2E ON T1.USER_ID=T2.USER_ID%2E WHERE T1.ORDER_DATE&lt;=\'${hivevar:TX_DATE_FORMAT}\'%2E AND T1.EFF_DATE&gt;\'${hivevar:TX_DATE_FORMAT}\'%2E AND T1.PROD_PRC_ID NOT IN (\'BCAZ3181\',\'BCAF9889\',\'BCAG0718\',\'BCAG2136\') --剔除欠控过渡资费%2E AND T1.DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\'%2E group by 1,2,3;%2E%2E-----add by zhaoxj in 20180621 增加活动提前6个月办理的最大订购时间%2E------1 参加营销活动的宽带用户和参加时间%2EDROP TABLE IF EXISTS PMID3.TMP1_STAT_KD_ORDER_TIME;%2ECREATE TABLE IF NOT EXISTS PMID3.TMP1_STAT_KD_ORDER_TIME%2E(%2EKD_PHONE_NO STRING%2E,OP_DATE DATE%2E)%2EROW FORMAT DELIMITED%2EFIELDS TERMINATED BY \'\\t\'%2ELINES TERMINATED BY \'\\n\';%2E%2EINSERT OVERWRITE TABLE PMID3.TMP1_STAT_KD_ORDER_TIME%2ESELECT T2.KD_PHONE_NO AS KD_PHONE_NO%2E ,T1.OP_DATE%2E FROM PDATA3.TB_MKT_ACT_RCD_DAY T1%2E INNER JOIN (SELECT T1.SEQN_NO --序列号%2E ,CASE WHEN TRIM(T1.FAV_ACPT_INFO)=\'\' THEN T1.WAS_RCMD_INFO ELSE T1.FAV_ACPT_INFO END AS KD_PHONE_NO%2E FROM PDATA3.TB_MKT_ACT_RCMD_INFO_DAY T1 --营销活动推荐信息表%2E WHERE T1.FAV_ISNT_PRSNT_ID=\'Y\' AND T1.DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\')T2%2E ON T1.OP_ACCEPT=T2.SEQN_NO%2E INNER JOIN (SELECT METHD_ID FROM PDATA3.TB_MKT_MEANS_CNTNT_INFO_DAY WHERE ELEMENT_ID=\'A45\' AND ELEMENT_PARAM_VAL =\'KD\' AND DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\' GROUP BY 1) T3%2E ON T1.METHD_ID=T3.METHD_ID%2E WHERE T1.DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\'%2E group by 1,2;%2E%2E------2 判断参加时间是 活动提前6个月办理%2EDROP TABLE IF EXISTS PMID3.TMP2_STAT_KD_ORDER_TIME;%2ECREATE TABLE IF NOT EXISTS PMID3.TMP2_STAT_KD_ORDER_TIME%2E(%2EUSER_ID DECIMAL(14,0)%2E,MAX_ORDER_DATE DATE%2E)%2EROW FORMAT DELIMITED%2EFIELDS TERMINATED BY \'\\t\'%2ELINES TERMINATED BY \'\\n\';%2E%2EINSERT OVERWRITE TABLE PMID3.TMP2_STAT_KD_ORDER_TIME%2ESELECT T1.USER_ID%2E ,MAX(T2.OP_DATE) AS MAX_ORDER_DATE%2E FROM PMID3.TMP1_PAR_KD_USER_DAY T1%2E INNER JOIN PMID3.TMP1_STAT_KD_ORDER_TIME T2%2E ON T1.PHONE_NO=T2.KD_PHONE_NO%2E WHERE T1.NEW_ACT_EXP_DATE IS NOT NULL%2E AND T2.OP_DATE BETWEEN ADD_MONTHS(T1.NEW_ACT_EXP_DATE,-5) AND T1.NEW_ACT_EXP_DATE --营销活动参加时间要在合约到期6月之内%2E GROUP BY 1;%2E%2E--五节新增的打折方式，优惠结束时间%2EDROP TABLE IF EXISTS PMID3.TMP_PAR_KD_USER_EXP_DAY_2 ;%2ECREATE TABLE IF NOT EXISTS PMID3.TMP_PAR_KD_USER_EXP_DAY_2%2E(%2EUSER_ID DECIMAL(14,0)%2E,EXP_DATE DATE%2E)%2EROW FORMAT DELIMITED%2EFIELDS TERMINATED BY \'\\t\'%2ELINES TERMINATED BY \'\\n\';%2E%2EINSERT OVERWRITE TABLE PMID3.TMP_PAR_KD_USER_EXP_DAY_2%2ESELECT T1.USER_ID%2E ,MAX(from_unixtime(unix_timestamp(CASE WHEN LENGTH(ATTR_VAL)=31 THEN SUBSTR(ATTR_VAL,18,8) ELSE SUBSTR(ATTR_VAL,19,8) END,\'yyyyMMdd\'),\'yyyy-MM-dd\')) AS exp_date%2E FROM PDATA3.TB_PDT_PRC_ATTR_DAY T1%2E INNER JOIN (SELECT USER_ID FROM PMID3.TMP_PAR_KD_USER_BASE_DAY GROUP BY 1) T2%2E ON T1.USER_ID=T2.USER_ID%2E WHERE attr_id = \'BA0010581\'%2E AND LENGTH(ATTR_VAL) IN (31,32)%2E AND T1.DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\'%2E GROUP BY 1;%2E%2E-----------------------------------------------------------------------------------------------------------------------%2E--宽带小区%2EDROP TABLE IF EXISTS PMID3.TMP_PAR_KD_CELL_DAY ;%2ECREATE TABLE IF NOT EXISTS PMID3.TMP_PAR_KD_CELL_DAY%2E(%2EKD_PHONE_NO STRING%2E,CELL_ID STRING%2E,CELL_NAME STRING%2E)%2EROW FORMAT DELIMITED%2EFIELDS TERMINATED BY \'\\t\'%2ELINES TERMINATED BY \'\\n\';%2E%2EINSERT OVERWRITE TABLE PMID3.TMP_PAR_KD_CELL_DAY%2ESELECT T1.BROD_ACCT_NO AS KD_PHONE_NO%2E ,T1.CELL_ID%2E ,T2.CELL AS CELL_NAME%2E FROM PDATA3.TB_PAR_BD_ADD_INFO_DAY T1%2E LEFT JOIN PDATA3.TB_PAR_BD_CELL_DAY T2%2E ON T1.CELL_ID=T2.CELL_ID%2E AND T2.DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\'%2E WHERE T1.DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\'%2E GROUP BY 1,2,3;%2E%2E----------------------------------------------------------------------------------------------------------------------------------------------------------------%2E--插入宽带用户%2EINSERT OVERWRITE TABLE PMID3.TB_MID_PAR_BD_USER_DAY%2ESELECT \'${hivevar:TX_DATE_FORMAT}\'%2E ,T1.USER_ID%2E ,T1.PHONE_NO%2E ,T1.REGION_CODE%2E ,T1.CITY_CODE%2E ,T1.SITE_CODE%2E ,T1.INNET_DATE%2E ,T1.USER_STAT_CODE%2E ,T1.PROD_PRCID%2E ,T4.BILL_CYCLE%2E ,T4.PRICE%2E ,CASE WHEN T2.ATTR_VALUE IS NOT NULL THEN CAST(SUBSTR(T2.ATTR_VALUE,1,LENGTH(T2.ATTR_VALUE)-1) AS DECIMAL(8,0))%2E ELSE CAST(SUBSTR(T3.ATTR_VAL,1,LENGTH(T3.ATTR_VAL)-1) AS DECIMAL(8,0))%2E END AS CNT_M --宽带M数%2E ,CASE WHEN T2.ATTR_VALUE IS NOT NULL THEN CAST(SUBSTR(T2.ATTR_VALUE,1,LENGTH(T2.ATTR_VALUE)-1) AS DECIMAL(8,0))%2E ELSE CAST(SUBSTR(T3.ATTR_VAL,1,LENGTH(T3.ATTR_VAL)-1) AS DECIMAL(8,0))%2E END AS NOT_TS_CNT_M --不含提速包的宽带带宽%2E ,\'\' --SED_PROD_PRCID%2E ,\'0\' --TT_FLAG 是否与铁通协同发展的宽带客户%2E ,\'0\' --RH_FLAG 是否融合宽带%2E ,\'0\' --RH_TYPE_FLAG 融合类型%2E ,\'0\' --KB_TYPE_FLAG 是否手机号码捆绑%2E ,\'未知\' --CON_MOD 宽带连接方式%2E ,\'城市\' --COVER_TYPE 覆盖类型%2E ,1 --MSI_NUM%2E ,\'\' --BASS_PAY_TYPE%2E ,\'00000000\' AS ATTR_ID --扩展属性字段，便于以后进行扩展%2E ,T1.PRODT_EFF_DATE%2E ,T1.PRODT_EXP_DATE%2E ,T1.ORDER_DATE%2E ,CASE WHEN T4.BILL_CYCLE&gt;1 THEN T1.PRODT_EXP_DATE%2E WHEN T4.BILL_CYCLE=1 AND T91.exp_date IS NOT NULL THEN T91.exp_date --五节新增的打折方式%2E WHEN T4.BILL_CYCLE=1 AND T91.exp_date IS NULL THEN T92.NEW_ACT_EXP_DATE%2E END as ACT_EXP_DATE%2E ,T92.CONTRACT_DATE%2E ,T10.ORDER_DATE as YY_EFF_DATE --预约资费最新订购日期%2E ,T11.MAX_ORDER_DATE --参加续费营销活动%2E ,T12.CELL_ID --小区id%2E ,T12.CELL_NAME --小区名称%2E ,\'\' --关联个人手机号码%2E FROM PMID3.TMP_PAR_KD_USER_BASE_DAY T1%2E LEFT JOIN PMID3.TMP_PAR_KD_USER_CNTM_DAY T2%2E on t1.user_id=t2.user_id%2E LEFT JOIN PDATA3.TB_PDT_PRC_ATTR_LIMIT_DAY T3%2E ON T1.PROD_PRCID=T3.PROD_PRC_ID%2E AND T3.ATTR_CODE=\'BB0000262\'%2E AND T3.DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\'%2E LEFT JOIN PCDE3.TB_CDE_APP_PRODT_ACCT_CODE T4%2E ON T1.PROD_PRCID=T4.PROD_PRC_ID%2E LEFT JOIN PMID3.TMP_PAR_KD_USER_EXP_DAY_2 T91%2E ON T1.USER_ID=T91.USER_ID%2E LEFT JOIN PMID3.TMP1_PAR_KD_USER_DAY T92%2E ON T1.USER_ID=T92.USER_ID%2E AND T1.PROD_PRCID=T92.PROD_PRCID%2E LEFT JOIN (SELECT USER_ID,MAX(ORDER_DATE) AS ORDER_DATE FROM PMID3.TMP_STAT_KD_PROD_ORDER GROUP BY 1)T10 --预约%2E ON T1.USER_ID=T10.USER_ID%2E LEFT JOIN PMID3.TMP2_STAT_KD_ORDER_TIME T11 --提前6个月办理%2E ON T1.USER_ID=T11.USER_ID%2E LEFT JOIN PMID3.TMP_PAR_KD_CELL_DAY T12%2E ON T1.PHONE_NO=T12.KD_PHONE_NO;%2E%2E---------------------------------------------------------------------------------------------------%2E--判断是否订购了提速包，如果订购了提速报，宽带M数要按照提速后的M数统计%2E--提速包%2EDROP TABLE IF EXISTS PMID3.TMP_PAR_KD_USER_DAY_1;%2ECREATE TABLE IF NOT EXISTS PMID3.TMP_PAR_KD_USER_DAY_1%2E(%2EUSER_ID DECIMAL(14,0)%2E,PROD_PRCID STRING%2E,CNT_M DECIMAL(8,0)%2E)%2EROW FORMAT DELIMITED%2EFIELDS TERMINATED BY \'\\t\'%2ELINES TERMINATED BY \'\\n\';%2E%2EINSERT OVERWRITE TABLE PMID3.TMP_PAR_KD_USER_DAY_1%2ESELECT T1.USER_ID%2E ,T1.PROD_PRC_ID%2E ,CAST(SUBSTR(T2.ATTR_VAL,1,LENGTH(T2.ATTR_VAL)-1) AS DECIMAL(8,0)) AS CNT_M --宽带M数%2E FROM PMID3.TB_MID_PDT_ORDER_USER_DAY T1%2E INNER JOIN PDATA3.TB_PDT_PRC_ATTR_LIMIT_DAY T2%2E ON T1.PROD_PRC_ID=T2.PROD_PRC_ID%2E AND T2.ATTR_CODE= \'BB0021046\'%2E AND T2.DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\'%2E INNER JOIN (%2E SELECT T1.USER_ID%2E ,MAX(CAST(CONCAT(from_unixtime(unix_timestamp(T1.OP_DATE,\'yyyy-MM-dd\'),\'yyyyMMdd\'),substr(CONCAT(\'00000\',T1.OP_TIME),LENGTH(CONCAT(\'00000\',T1.OP_TIME))-5)) AS DECIMAL(16,0))) AS OPER_DATE_TIME%2E FROM PMID3.TB_MID_PDT_ORDER_USER_DAY T1%2E WHERE T1.PROD_EXP_DATE&gt;=\'${hivevar:TX_DATE_FORMAT}\'%2E AND T1.PROD_EFF_DATE&lt;=\'${hivevar:TX_DATE_FORMAT}\'%2E AND T1.USER_TYPE_CODE&lt;&gt;\'02\'%2E AND T1.USER_STAT_CODE&lt;\'a\'%2E AND T1.BUSN_BRAND_ID=\'kd\'%2E AND T1.PROD_ID=\'BPAF0503\'%2E GROUP BY 1) T3%2E ON T1.USER_ID=T3.USER_ID%2E AND CAST(CONCAT(from_unixtime(unix_timestamp(T1.OP_DATE,\'yyyy-MM-dd\'),\'yyyyMMdd\'),substr(CONCAT(\'00000\',T1.OP_TIME),LENGTH(CONCAT(\'00000\',T1.OP_TIME))-5)) AS DECIMAL(16,0))=T3.OPER_DATE_TIME%2E WHERE T1.PROD_ID=\'BPAF0503\' GROUP BY 1,2,3; --提速包%2E%2EINSERT OVERWRITE TABLE PMID3.TMP_PAR_KD_USER_DAY_1%2ESELECT%2ET1.USER_ID%2E,T1.PROD_PRCID%2E,T1.CNT_M%2EFROM PMID3.TMP_PAR_KD_USER_DAY_1 T1%2ELEFT JOIN (SELECT USER_ID,COUNT(*) AS CNT_USER FROM PMID3.TMP_PAR_KD_USER_DAY_1 GROUP BY 1 HAVING COUNT(*)&gt;1) T2%2EON T1.USER_ID=T2.USER_ID%2EWHERE T2.USER_ID IS NULL;%2E%2E--更新提速包资费和宽带M数%2EINSERT OVERWRITE TABLE PMID3.TB_MID_PAR_BD_USER_DAY%2ESELECT%2E T1.DEAL_DATE%2E,T1.USER_ID%2E,T1.PHONE_NO%2E,T1.REGION_CODE%2E,T1.CITY_CODE%2E,T1.SITE_CODE%2E,T1.INNET_DATE%2E,T1.USER_STAT_CODE%2E,T1.PROD_PRC_ID%2E,T1.BILL_CYCLE%2E,T1.PRICE%2E,CASE WHEN T2.USER_ID IS NOT NULL AND T1.BRODM_NUM=\'${hivevar:TX_DATE_FORMAT}\'%2E AND T1.PRODT_EFF_DATE&lt;=\'${hivevar:TX_DATE_FORMAT}\'%2E GROUP BY 1,2%2E ) T2%2E ON T1.SERIAL_NO=T2.SERIAL_NO%2E GROUP BY 1,2,3,4;%2E%2E--2017年2季度以后 按照群组关系%2E---模组化%2EDROP TABLE IF EXISTS PMID3.TMP_PAR_KD_USER_DAY_3_MZH;%2ECREATE TABLE IF NOT EXISTS PMID3.TMP_PAR_KD_USER_DAY_3_MZH%2E(%2EPHONE_NO STRING%2E,USER_ID DECIMAL(14,0)%2E,KD_PHONE_NO STRING%2E,KD_USER_ID DECIMAL(14,0)%2E,RH_TYPE_FLAG STRING%2E)%2EROW FORMAT DELIMITED%2EFIELDS TERMINATED BY \'\\t\'%2ELINES TERMINATED BY \'\\n\';%2E%2EINSERT OVERWRITE TABLE PMID3.TMP_PAR_KD_USER_DAY_3_MZH%2ESELECT T1.PHONE_NO --个人号码%2E ,T1.object_id AS USER_ID --个人USER_ID%2E ,T2.PHONE_NO AS KD_PHONE_NO --宽带号码%2E ,T2.object_id AS KD_USER_ID --宽带USER_ID%2E ,\'A\' AS RH_TYPE_FLAG --标识为17年二季度融合活动%2E FROM (%2E select OBJECT_ID%2E ,PHONE_NO%2E ,GROUP_ID%2E FROM PMID3.TB_MID_GRP_USER_DAY T1%2E WHERE group_type=\'BD2\' ---宽带融合%2E AND GROUP_TYPE NOT IN (\'N\',\'B\')%2E AND MEMBER_ROLE_ID = \'30020\' ---家长，即为手机号%2E AND EFF_DATE&lt;=\'${hivevar:TX_DATE_FORMAT}\'%2E AND EXP_DATE&gt;=\'${hivevar:TX_DATE_FORMAT}\'%2E AND DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\'%2E group by 1,2,3)T1%2E INNER JOIN(select OBJECT_ID%2E ,PHONE_NO%2E ,GROUP_ID%2E FROM PMID3.TB_MID_GRP_USER_DAY T1%2E INNER JOIN (select prod_prc_id from pcde3.tb_cde_pdt_bd_prc_dict where avail_day = 1 group by 1) T2 --融合宽带资费 --modify in 20180518%2E ON T1.PROD_PRCID=T2.prod_prc_id%2E WHERE group_type=\'BD2\' ---宽带融合%2E AND GROUP_TYPE NOT IN (\'N\',\'B\')%2E --AND PROD_PRCID IN (\'BCAX7976\',\'BCAX7977\',\'BCAX7978\') --限定资费为提供的3档资费%2E AND MEMBER_ROLE_ID = \'30021\' ---成员，即为宽带账号%2E AND EFF_DATE&lt;=\'${hivevar:TX_DATE_FORMAT}\'%2E AND EXP_DATE&gt;=\'${hivevar:TX_DATE_FORMAT}\'%2E AND DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\'%2E group by 1,2,3)T2%2E ON T1.GROUP_ID = T2.GROUP_ID;%2E%2E--20180425%2E--优先考虑模组化，之后再考虑营销活动推荐信息表%2EDROP TABLE IF EXISTS PMID3.TMP_PAR_KD_USER_DAY_3;%2ECREATE TABLE IF NOT EXISTS PMID3.TMP_PAR_KD_USER_DAY_3%2E(%2EPHONE_NO STRING%2E,USER_ID DECIMAL(14,0)%2E,KD_PHONE_NO STRING%2E,KD_USER_ID DECIMAL(14,0)%2E,RH_TYPE_FLAG STRING%2E)%2EROW FORMAT DELIMITED%2EFIELDS TERMINATED BY \'\\t\'%2ELINES TERMINATED BY \'\\n\';%2E%2EINSERT OVERWRITE TABLE PMID3.TMP_PAR_KD_USER_DAY_3%2ESELECT PHONE_NO%2E,USER_ID%2E,KD_PHONE_NO%2E,KD_USER_ID%2E,RH_TYPE_FLAG%2EFROM PMID3.TMP_PAR_KD_USER_DAY_3_MZH;%2E%2EINSERT INTO PMID3.TMP_PAR_KD_USER_DAY_3%2ESELECT T1.PHONE_NO%2E,T1.USER_ID%2E,T1.KD_PHONE_NO%2E,T1.KD_USER_ID%2E,T1.RH_TYPE_FLAG%2EFROM PMID3.TMP_PAR_KD_USER_DAY_3_ACT T1%2ELEFT JOIN (SELECT KD_USER_ID FROM PMID3.TMP_PAR_KD_USER_DAY_3 WHERE KD_USER_ID IS NOT NULL GROUP BY 1) T2%2EON T1.KD_USER_ID=T2.KD_USER_ID%2EWHERE T2.KD_USER_ID IS NULL%2EGROUP BY 1,2,3,4,5;%2E%2E--ADD BY ZHAOBO IN 20180518%2E---为了保证 RH_TYPE_FLAG 的波动，将 营销活动过来的 RH_TYPE_FLAG 替换 和模组化交集的部分%2EINSERT OVERWRITE TABLE PMID3.TMP_PAR_KD_USER_DAY_3%2ESELECT T1.PHONE_NO%2E ,T1.USER_ID%2E ,T1.KD_PHONE_NO%2E ,T1.KD_USER_ID%2E ,CASE WHEN T2.KD_USER_ID IS NOT NULL THEN T2.RH_TYPE_FLAG ELSE T1.RH_TYPE_FLAG END%2E FROM PMID3.TMP_PAR_KD_USER_DAY_3 T1%2ELEFT JOIN (SELECT KD_USER_ID,MAX(RH_TYPE_FLAG) AS RH_TYPE_FLAG%2E FROM PMID3.TMP_PAR_KD_USER_DAY_3_ACT%2E GROUP BY 1%2E ) T2%2E ON T1.KD_USER_ID=T2.KD_USER_ID;%2E%2EDROP TABLE IF EXISTS PMID3.TMP_PAR_KD_USER_DTL_DAY;%2ECREATE TABLE IF NOT EXISTS PMID3.TMP_PAR_KD_USER_DTL_DAY%2E(%2EKD_PHONE_NO STRING%2E,IF_MAIN STRING%2E,PHONE_NO STRING%2E,RH_TYPE_FLAG STRING%2E)%2EROW FORMAT DELIMITED%2EFIELDS TERMINATED BY \'\\t\'%2ELINES TERMINATED BY \'\\n\';%2E%2E--手机用户关联，低消%2EINSERT OVERWRITE TABLE PMID3.TMP_PAR_KD_USER_DTL_DAY%2ESELECT T1.KD_PHONE_NO --宽带号码%2E ,CASE WHEN T2.ATTR_ID IS NULL THEN \'1\'%2E WHEN T2.ATTR_VAL=T1.PHONE_NO THEN \'1\'%2E WHEN T2.ATTR_ID=\'BA0010424\' THEN \'1\'%2E ELSE \'0\' END%2E ,COALESCE(T2.ATTR_VAL,T1.PHONE_NO) --关联的手机号码%2E ,T1.RH_TYPE_FLAG%2E FROM PMID3.TMP_PAR_KD_USER_DAY_3 T1%2E INNER JOIN PDATA3.TB_PDT_PRC_ATTR_DAY T2%2E ON T1.USER_ID = T2.USER_ID%2E AND T2.ATTR_ID IN (\'BA0010424\',\'BA0010425\',\'BA0010426\',\'BA0010427\')%2E AND T2.EFF_DATE&lt;=\'${hivevar:TX_DATE_FORMAT}\'%2E AND T2.EXP_DATE&gt;\'${hivevar:TX_DATE_FORMAT}\'%2E AND T2.DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\'%2EGROUP BY 1,2,3,4;%2E%2E--宽带用户关联，限制主资费套餐%2EINSERT INTO PMID3.TMP_PAR_KD_USER_DTL_DAY%2ESELECT T1.KD_PHONE_NO --宽带号码%2E ,CASE WHEN T2.ATTR_ID IS NULL THEN \'1\'%2E WHEN T2.ATTR_VAL=T1.PHONE_NO THEN \'1\'%2E WHEN T2.ATTR_ID=\'BA0010298\' THEN \'1\'%2E ELSE \'0\' END%2E ,COALESCE(T2.ATTR_VAL,T1.PHONE_NO) --关联的手机号码%2E ,T1.RH_TYPE_FLAG%2E FROM PMID3.TMP_PAR_KD_USER_DAY_3 T1%2E INNER JOIN PDATA3.TB_PDT_PRC_ATTR_DAY T2%2E ON T1.KD_USER_ID = T2.USER_ID%2E AND T2.ATTR_ID IN (\'BA0010298\',\'BA0010299\',\'BA0010300\',\'BA0011308\')%2E AND T2.EFF_DATE&lt;=\'${hivevar:TX_DATE_FORMAT}\'%2E AND T2.EXP_DATE&gt;\'${hivevar:TX_DATE_FORMAT}\'%2E AND T2.DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\'%2EGROUP BY 1,2,3,4;%2E%2E--其余情况，默认为家长%2EINSERT INTO PMID3.TMP_PAR_KD_USER_DTL_DAY%2ESELECT T1.KD_PHONE_NO --宽带号码%2E ,\'1\'%2E ,T1.PHONE_NO --关联的手机号码%2E ,T1.RH_TYPE_FLAG%2E FROM PMID3.TMP_PAR_KD_USER_DAY_3 T1%2E left JOIN (SELECT KD_PHONE_NO FROM PMID3.TMP_PAR_KD_USER_DTL_DAY group by 1) T2%2E ON T1.KD_PHONE_NO=T2.KD_PHONE_NO%2Ewhere t2.KD_PHONE_NO is null%2EGROUP BY 1,2,3,4;%2E%2E--如果一个宽带号码对应多个手机号码%2EINSERT OVERWRITE TABLE PMID3.TMP_PAR_KD_USER_DTL_DAY%2ESELECT T1.KD_PHONE_NO%2E ,T1.IF_MAIN%2E ,T1.PHONE_NO%2E ,CASE WHEN T1.RH_TYPE_FLAG=\'A\' THEN \'4\' --4单人套餐%2E ELSE CASE WHEN T2.KD_PHONE_NO IS NOT NULL THEN \'1\' ELSE T1.RH_TYPE_FLAG END%2E END --1多人低消%2E FROM PMID3.TMP_PAR_KD_USER_DTL_DAY T1%2E LEFT JOIN (SELECT KD_PHONE_NO%2E FROM PMID3.TMP_PAR_KD_USER_DTL_DAY%2E WHERE RH_TYPE_FLAG=\'A\'%2E AND IF_MAIN=\'0\'%2E GROUP BY 1%2E ) T2%2E ON T1.KD_PHONE_NO=T2.KD_PHONE_NO;%2E%2EDROP TABLE IF EXISTS PMID3.TMP_PAR_KD_USER_DAY_4;%2ECREATE TABLE IF NOT EXISTS PMID3.TMP_PAR_KD_USER_DAY_4%2E(%2EKD_PHONE_NO STRING%2E,RH_TYPE_FLAG STRING%2E)%2EROW FORMAT DELIMITED%2EFIELDS TERMINATED BY \'\\t\'%2ELINES TERMINATED BY \'\\n\';%2E%2EINSERT OVERWRITE TABLE PMID3.TMP_PAR_KD_USER_DAY_4%2ESELECT KD_PHONE_NO%2E ,MIN(RH_TYPE_FLAG) AS RH_TYPE_FLAG --融合的优先级：1多人低消 2单人低消 3多人套餐 4单人套餐%2E FROM PMID3.TMP_PAR_KD_USER_DTL_DAY%2E GROUP BY 1;%2E%2E--RH_FLAG 是否融合宽带%2E--RH_TYPE_FLAG 融合类型%2E--KB_TYPE_FLAG 是否手机号码捆绑%2EINSERT OVERWRITE TABLE PMID3.TB_MID_PAR_BD_USER_DAY%2ESELECT T1.DEAL_DATE%2E,T1.USER_ID%2E,T1.PHONE_NO%2E,T1.REGION_CODE%2E,T1.CITY_CODE%2E,T1.SITE_CODE%2E,T1.INNET_DATE%2E,T1.USER_STAT_CODE%2E,T1.PROD_PRC_ID%2E,T1.BILL_CYCLE%2E,T1.PRICE%2E,T1.BRODM_NUM%2E,T1.BROD_BDWTH%2E,T1.BROD_SPEED_PRC_CODE%2E,T1.ISNT_RAILCOM%2E,CASE WHEN T2.KD_PHONE_NO IS NOT NULL THEN \'1\' ELSE T1.ISNT_FUSION_BROD END%2E,CASE WHEN T2.KD_PHONE_NO IS NOT NULL THEN T2.RH_TYPE_FLAG ELSE T1.FUSION_TYPE END%2E,CASE WHEN T2.KD_PHONE_NO IS NOT NULL THEN \'1\' ELSE T1.ISNT_PHONE_NO_BIND END%2E,T1.CONN_METHD%2E,T1.COVER_TYPE%2E,T1.BIND_PHONE_USER_NUM%2E,T1.BASS_PAY_METHD%2E,T1.EXTND_ATTR_FIELD%2E,T1.PROD_EFF_DATE%2E,T1.PROD_EXP_DATE%2E,T1.ORDER_DATE%2E,T1.CNTRT_EXPIRE_DATE%2E,T1.CNTRT_CYCLE%2E,T1.BSPOK_PRC_ORDER_DATE%2E,T1.MAX_ORDER_DATE%2E,T1.CELL_ID%2E,T1.CELL_NAME%2E,T1.CONTACT_PHONE_NO%2EFROM PMID3.TB_MID_PAR_BD_USER_DAY T1%2ELEFT JOIN (SELECT KD_PHONE_NO,RH_TYPE_FLAG FROM PMID3.TMP_PAR_KD_USER_DAY_4 GROUP BY 1,2) T2%2EON T1.PHONE_NO=T2.KD_PHONE_NO;%2E%2E------------------------------------------------------------------------------------------------------------%2EDROP TABLE IF EXISTS PMID3.TMP_PAR_KD_USER_DAY_5;%2ECREATE TABLE IF NOT EXISTS PMID3.TMP_PAR_KD_USER_DAY_5%2E(%2EKD_USER_ID DECIMAL(14,0)%2E,GR_PHONE_NO STRING%2E,flag STRING%2E)%2EROW FORMAT DELIMITED%2EFIELDS TERMINATED BY \'\\t\'%2ELINES TERMINATED BY \'\\n\';%2E%2EINSERT OVERWRITE TABLE PMID3.TMP_PAR_KD_USER_DAY_5%2ESELECT T1.USER_ID AS KD_USER_ID%2E ,T2.ATTR_VAL AS GR_PHONE_NO%2E FROM PMID3.TB_MID_PAR_USER_DAY T1%2E INNER JOIN(%2ESELECT T1.USER_ID%2E ,T1.ATTR_VAL%2E from PDATA3.TB_PDT_PRC_ATTR_DAY t1%2E where t1.attr_id in (\'BA0010298\',\'BA0010299\',\'BA0010300\')%2E and t1.exp_date &gt;\'${hivevar:TX_DATE_FORMAT}\'%2E and t1.eff_date &lt;=\'${hivevar:TX_DATE_FORMAT}\'%2E and ATTR_VAL like \'1%\'%2E AND T1.DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\'%2E GROUP BY 1,2%2E )T2%2E ON T1.USER_ID=T2.USER_ID%2E WHERE T1.USER_TYPE_CODE&lt;&gt;\'02\'%2E AND T1.USER_STAT_CODE&lt;\'a\'%2E group by 1,2;%2E%2E--停复机%2EINSERT INTO PMID3.TMP_PAR_KD_USER_DAY_5%2ESELECT T1.USER_ID AS KD_USER_ID%2E ,T2.PHONE_NO AS GR_PHONE_NO%2E FROM PMID3.TB_MID_PAR_PHUNI_DAY T1%2E INNER JOIN (%2ESELECT T1.KD_PHONE --宽带号码%2E ,T1.PHONE_NO --个人号码%2E FROM PDATA3.TB_MKT_MARKET_RECD_DAY T1 -- PHONE_NO手机%2E WHERE T1.BEGIN_DATE &lt;=\'${hivevar:TX_DATE_FORMAT}\'%2E AND T1.END_DATE &gt;\'${hivevar:TX_DATE_FORMAT}\'%2E AND KD_PHONE LIKE \'2%\'%2E AND T1.DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\'%2E GROUP BY 1,2)T2%2E ON T1.PHONE_NO=T2.KD_PHONE%2E WHERE T1.USER_TYPE_CODE&lt;&gt;\'02\'%2E AND T1.USER_STAT_CODE&lt;\'a\';%2E%2E--代付%2EINSERT INTO PMID3.TMP_PAR_KD_USER_DAY_5%2ESELECT T2.KD_USER_ID%2E ,T1.PHONE_NO%2E FROM PMID3.TB_MID_PAR_USER_DAY T1%2EINNER JOIN ( SELECT T1.USER_ID AS KD_USER_ID%2E ,T2.USER_ID AS GR_USER_ID%2E FROM PDATA3.TB_FIN_ACCT_CON_REL_DAY T1%2E INNER JOIN PDATA3.TB_FIN_ACCT_CON_REL_DAY T2%2E ON T1.ACCT_ID = T2.ACCT_ID%2E AND T2.BILL_ORDER = 99999999%2E AND T2.DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\'%2E INNER JOIN PMID3.TB_MID_PAR_BD_USER_DAY T3%2E ON T1.USER_ID=T3.USER_ID%2E WHERE T1.BILL_ORDER&lt;&gt;99999999 --代付%2E AND T1.DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\'%2E )T2%2E ON T1.USER_ID=T2.GR_USER_ID%2EWHERE T1.USER_TYPE_CODE&lt;&gt;\'02\'%2E AND T1.USER_STAT_CODE&lt;\'a\';%2E%2EINSERT INTO PMID3.TMP_PAR_KD_USER_DAY_5%2ESELECT T1.USER_ID AS KD_USER_ID%2E ,T2.ATTR_VALUE AS PHONE_NO%2E FROM PMID3.TB_MID_PAR_BD_USER_DAY T1%2E INNER JOIN (SELECT USER_ID,MAX(ATTR_VAL) AS ATTR_VALUE%2E FROM (select USER_ID,ATTR_VAL from PDATA3.TB_PDT_SERV_ATTR_INFO_DAY where attr_id in (\'BB0000271\',\'BB0000051\') and DEAL_DATE_P=\'${hivevar:TX_DATE_FORMAT}\') T1%2E LEFT JOIN (SELECT KD_USER_ID FROM PMID3.TMP_PAR_KD_USER_DAY_5 group by 1) T2%2E ON T1.USER_ID=T2.KD_USER_ID%2E WHERE T2.KD_USER_ID IS NULL%2E GROUP BY 1%2E ) T2%2E ON T1.USER_ID=T2.USER_ID%2E WHERE T1.ISNT_FUSION_BROD=\'0\';%2E%2E%2EINSERT OVERWRITE TABLE PMID3.TB_MID_PAR_BD_USER_DAY%2ESELECT T1.DEAL_DATE%2E,T1.USER_ID%2E,T1.PHONE_NO%2E,T1.REGION_CODE%2E,T1.CITY_CODE%2E,T1.SITE_CODE%2E,T1.INNET_DATE%2E,T1.USER_STAT_CODE%2E,T1.PROD_PRC_ID%2E,T1.BILL_CYCLE%2E,T1.PRICE%2E,CASE WHEN T1.BRODM_NUM IS NULL THEN 2 ELSE T1.BRODM_NUM END%2E,T1.BROD_BDWTH%2E,T1.BROD_SPEED_PRC_CODE%2E,T1.ISNT_RAILCOM%2E,T1.ISNT_FUSION_BROD%2E,T1.FUSION_TYPE%2E,CASE WHEN T2.KD_USER_ID IS NOT NULL AND T1.ISNT_FUSION_BROD=\'0\' THEN \'1\' ELSE T1.ISNT_PHONE_NO_BIND END%2E,T1.CONN_METHD%2E,T1.COVER_TYPE%2E,T1.BIND_PHONE_USER_NUM%2E,T1.BASS_PAY_METHD%2E,T1.EXTND_ATTR_FIELD%2E,T1.PROD_EFF_DATE%2E,T1.PROD_EXP_DATE%2E,T1.ORDER_DATE%2E,T1.CNTRT_EXPIRE_DATE%2E,T1.CNTRT_CYCLE%2E,T1.BSPOK_PRC_ORDER_DATE%2E,T1.MAX_ORDER_DATE%2E,T1.CELL_ID%2E,T1.CELL_NAME%2E,T1.CONTACT_PHONE_NO%2EFROM PMID3.TB_MID_PAR_BD_USER_DAY T1%2ELEFT JOIN (SELECT KD_USER_ID%2E FROM PMID3.TMP_PAR_KD_USER_DAY_5%2E GROUP BY 1) T2%2EON T1.USER_ID=T2.KD_USER_ID;%2E%2EDROP TABLE IF EXISTS PMID3.TB_MID_PAR_BD_USER_DTL_DAY;%2ECREATE TABLE IF NOT EXISTS PMID3.TB_MID_PAR_BD_USER_DTL_DAY%2E(%2EKD_PHONE_NO STRING%2E,PHONE_NO STRING%2E,IF_MAIN STRING%2E,RH_TYPE_FLAG STRING%2E)%2EROW FORMAT DELIMITED%2ELINES TERMINATED BY \'\\n\';%2E%2EINSERT OVERWRITE TABLE PMID3.TB_MID_PAR_BD_USER_DTL_DAY%2ESELECT T1.KD_PHONE_NO%2E ,T1.PHONE_NO%2E ,T1.IF_MAIN%2E ,MIN(T1.RH_TYPE_FLAG) --按照优先级排列，1 优先级最高%2E FROM PMID3.TMP_PAR_KD_USER_DTL_DAY T1%2E INNER JOIN (SELECT PHONE_NO FROM PMID3.TB_MID_PAR_BD_USER_DAY group by 1) T2%2E ON T1.KD_PHONE_NO=T2.PHONE_NO%2E GROUP BY 1,2,3;%2E%2E--将裸宽捆绑的个人号码插入%2EINSERT INTO PMID3.TB_MID_PAR_BD_USER_DTL_DAY%2ESELECT T1.PHONE_NO --宽带号码%2E ,T2.GR_PHONE_NO%2E ,\'2\'%2E ,\'5\' --裸宽%2E FROM PMID3.TB_MID_PAR_BD_USER_DAY T1%2E INNER JOIN (select KD_USER_ID,GR_PHONE_NO from PMID3.TMP_PAR_KD_USER_DAY_5 group by 1,2) T2%2E ON T1.USER_ID=T2.KD_USER_ID%2E where T1.ISNT_FUSION_BROD=\'0\'%2EGROUP BY 1,2,3,4;%2E%2E--ADD BY ZHAOXJ 20180928 增加关联个人手机号码%2EINSERT OVERWRITE TABLE PMID3.TB_MID_PAR_BD_USER_DAY%2ESELECT T1.DEAL_DATE%2E,T1.USER_ID%2E,T1.PHONE_NO%2E,T1.REGION_CODE%2E,T1.CITY_CODE%2E,T1.SITE_CODE%2E,T1.INNET_DATE%2E,T1.USER_STAT_CODE%2E,T1.PROD_PRC_ID%2E,T1.BILL_CYCLE%2E,T1.PRICE%2E,T1.BRODM_NUM%2E,T1.BROD_BDWTH%2E,T1.BROD_SPEED_PRC_CODE%2E,T1.ISNT_RAILCOM%2E,T1.ISNT_FUSION_BROD%2E,T1.FUSION_TYPE%2E,T1.ISNT_PHONE_NO_BIND%2E,T1.CONN_METHD%2E,T1.COVER_TYPE%2E,T1.BIND_PHONE_USER_NUM%2E,T1.BASS_PAY_METHD%2E,T1.EXTND_ATTR_FIELD%2E,T1.PROD_EFF_DATE%2E,T1.PROD_EXP_DATE%2E,T1.ORDER_DATE%2E,T1.CNTRT_EXPIRE_DATE%2E,T1.CNTRT_CYCLE%2E,T1.BSPOK_PRC_ORDER_DATE%2E,T1.MAX_ORDER_DATE%2E,T1.CELL_ID%2E,T1.CELL_NAME%2E,CASE WHEN T2.KD_PHONE_NO IS NOT NULL THEN T2.PHONE_NO ELSE T1.CONTACT_PHONE_NO END%2EFROM PMID3.TB_MID_PAR_BD_USER_DAY T1%2ELEFT JOIN (SELECT KD_PHONE_NO,PHONE_NO%2E FROM (SELECT KD_PHONE_NO,PHONE_NO,IF_MAIN,main_flag0,row_number() OVER (PARTITION BY KD_PHONE_NO ORDER BY main_flag0 DESC) as pv_rank%2E FROM (SELECT KD_PHONE_NO,PHONE_NO,IF_MAIN%2E ,case when IF_MAIN=\'1\' then \'3\'%2E when IF_MAIN=\'2\' then \'2\'%2E when IF_MAIN=\'0\' then \'1\'%2E else \'0\'%2E end main_flag0%2E FROM PMID3.TB_MID_PAR_BD_USER_DTL_DAY%2E ) A%2E ) B%2E WHERE pv_rank=1%2E group by 1,2%2E )T2%2E ON T1.PHONE_NO=T2.KD_PHONE_NO;%2E%2E--21：低消模式-群组承诺单人付费%2EDROP TABLE IF EXISTS PMID3.TMP_PAR_KD_USER_DAY_6;%2ECREATE TABLE IF NOT EXISTS PMID3.TMP_PAR_KD_USER_DAY_6%2E(%2EKD_PHONE_NO STRING%2E,MSI_NUM INT%2E,BASS_PAY_TYPE STRING%2E)%2EROW FORMAT DELIMITED%2EFIELDS TERMINATED BY \'\\t\'%2ELINES TERMINATED BY \'\\n\';%2E%2EINSERT OVERWRITE TABLE PMID3.TMP_PAR_KD_USER_DAY_6%2ESELECT KD_PHONE_NO%2E ,CASE WHEN MSI_NUM&gt;4 THEN 4 ELSE MSI_NUM END AS MSI_NUM%2E ,\'21\' AS BASS_PAY_TYPE%2E FROM(SELECT KD_PHONE_NO%2E ,COUNT(DISTINCT PHONE_NO) MSI_NUM%2E FROM PMID3.TB_MID_PAR_BD_USER_DTL_DAY%2E WHERE RH_TYPE_FLAG IN (\'1\',\'2\')%2E GROUP BY 1 %2E HAVING COUNT(DISTINCT PHONE_NO)&gt;1%2E )T %2EGROUP BY 1,2,3;%2E%2E--20：低消模式-单人承诺单人付费%2EINSERT INTO PMID3.TMP_PAR_KD_USER_DAY_6%2ESELECT KD_PHONE_NO%2E ,CASE WHEN MSI_NUM&gt;4 THEN 4 ELSE MSI_NUM END AS MSI_NUM%2E ,\'20\' AS BASS_PAY_TYPE%2E FROM(SELECT KD_PHONE_NO%2E ,COUNT(DISTINCT PHONE_NO) MSI_NUM%2E FROM PMID3.TB_MID_PAR_BD_USER_DTL_DAY%2E WHERE RH_TYPE_FLAG IN (\'1\',\'2\')%2E GROUP BY 1 %2E HAVING COUNT(DISTINCT PHONE_NO)=1%2E )T %2EGROUP BY 1,2,3;%2E%2E--22：低消模式-群组承诺多人付费%2EINSERT INTO PMID3.TMP_PAR_KD_USER_DAY_6%2ESELECT KD_PHONE_NO%2E ,CASE WHEN MSI_NUM&gt;4 THEN 4 ELSE MSI_NUM END AS MSI_NUM%2E ,\'22\' AS BASS_PAY_TYPE%2E FROM(SELECT T1.KD_PHONE_NO%2E ,COUNT(DISTINCT T1.PHONE_NO) MSI_NUM%2E FROM PMID3.TB_MID_PAR_BD_USER_DTL_DAY T1%2E LEFT JOIN (select KD_PHONE_NO FROM PMID3.TB_MID_PAR_BD_USER_DTL_DAY WHERE RH_TYPE_FLAG IN (\'1\',\'2\') GROUP BY 1) T2%2E ON T1.KD_PHONE_NO=T2.KD_PHONE_NO%2E WHERE T1.RH_TYPE_FLAG IN (\'3\',\'4\')%2E AND T2.KD_PHONE_NO IS NULL%2E GROUP BY 1 %2E HAVING COUNT(DISTINCT T1.PHONE_NO)&gt;1%2E )T %2EGROUP BY 1,2,3;%2E%2E--23：套餐模式-单人承诺单人付费%2E----modify by zhaobo in 20170301 lvyou要求将原来为\'23\'的值，修改为\'20\'%2EINSERT INTO PMID3.TMP_PAR_KD_USER_DAY_6%2ESELECT KD_PHONE_NO%2E ,CASE WHEN MSI_NUM&gt;4 THEN 4 ELSE MSI_NUM END AS MSI_NUM%2E ,\'20\'%2E FROM(SELECT T1.KD_PHONE_NO%2E ,COUNT(DISTINCT T1.PHONE_NO) MSI_NUM%2E FROM PMID3.TB_MID_PAR_BD_USER_DTL_DAY T1%2E LEFT JOIN (select KD_PHONE_NO FROM PMID3.TB_MID_PAR_BD_USER_DTL_DAY WHERE RH_TYPE_FLAG IN (\'1\',\'2\') GROUP BY 1) T2%2E ON T1.KD_PHONE_NO=T2.KD_PHONE_NO%2E WHERE T1.RH_TYPE_FLAG IN (\'3\',\'4\')%2E AND T2.KD_PHONE_NO IS NULL%2E GROUP BY 1 %2E HAVING COUNT(DISTINCT T1.PHONE_NO)=1%2E )T %2EGROUP BY 1,2,3;%2E%2E%2EINSERT OVERWRITE TABLE PMID3.TB_MID_PAR_BD_USER_DAY%2ESELECT T1.DEAL_DATE%2E,T1.USER_ID%2E,T1.PHONE_NO%2E,T1.REGION_CODE%2E,T1.CITY_CODE%2E,T1.SITE_CODE%2E,T1.INNET_DATE%2E,T1.USER_STAT_CODE%2E,T1.PROD_PRC_ID%2E,T1.BILL_CYCLE%2E,T1.PRICE%2E,T1.BRODM_NUM%2E,T1.BROD_BDWTH%2E,T1.BROD_SPEED_PRC_CODE%2E,T1.ISNT_RAILCOM%2E,T1.ISNT_FUSION_BROD%2E,T1.FUSION_TYPE%2E,T1.ISNT_PHONE_NO_BIND%2E,T1.CONN_METHD%2E,T1.COVER_TYPE%2E,CASE WHEN T2.KD_PHONE_NO IS NOT NULL THEN T2.MSI_NUM ELSE T1.BIND_PHONE_USER_NUM END%2E,CASE WHEN T2.KD_PHONE_NO IS NOT NULL THEN T2.BASS_PAY_TYPE ELSE T1.BASS_PAY_METHD END%2E,T1.EXTND_ATTR_FIELD%2E,T1.PROD_EFF_DATE%2E,T1.PROD_EXP_DATE%2E,T1.ORDER_DATE%2E,T1.CNTRT_EXPIRE_DATE%2E,T1.CNTRT_CYCLE%2E,T1.BSPOK_PRC_ORDER_DATE%2E,T1.MAX_ORDER_DATE%2E,T1.CELL_ID%2E,T1.CELL_NAME%2E,T1.CONTACT_PHONE_NO%2EFROM PMID3.TB_MID_PAR_BD_USER_DAY T1%2ELEFT JOIN (SELECT KD_PHONE_NO,MSI_NUM,BASS_PAY_TYPE FROM PMID3.TMP_PAR_KD_USER_DAY_6 GROUP BY 1,2,3) T2%2EON T1.PHONE_NO=T2.KD_PHONE_NO;%2E%2E', '/user/atomic/oozie-app/cdrapp/hivesql/xx3.sql', 'hive2', 'admin', '2019-05-09 15:12:37', 'admin', '2019-05-09 15:23:26');
INSERT INTO `oozie_hive_sql` VALUES ('16', null, '20190715142014fbX0tX4shblXtyCp2sN', '3', 'select 1+1;', '/user/atomic/oozie-app/atomic/hivesql/antest002_3.sql', 'hive2', 'admin', '2019-07-15 14:20:33', null, null);
INSERT INTO `oozie_hive_sql` VALUES ('17', null, '20190715181159OD2FGIzr7F9k3gkx1l1', '3', 'show databases;', '/user/atomic/oozie-app/atomic/hivesql/antest003_3.sql', 'hive2', 'admin', '2019-07-15 18:12:23', null, null);
INSERT INTO `oozie_hive_sql` VALUES ('18', null, '20190516174113zbGUSfpjDg92Uztuafl', '3', 'show databases;', '/user/atomic/oozie-app/atomic/hivesql/antest/antest_3.sql', 'hive2', 'admin', '2019-07-18 16:27:34', 'admin', '2019-07-19 11:47:05');

-- ----------------------------
-- Table structure for oozie_job
-- ----------------------------
DROP TABLE IF EXISTS `oozie_job`;
CREATE TABLE `oozie_job` (
  `job_id` varchar(40) NOT NULL COMMENT '唯一标识',
  `platform_id` int(11) DEFAULT NULL COMMENT '集群ID',
  `project_id` int(11) DEFAULT NULL COMMENT '项目id',
  `subsystem_id` int(11) DEFAULT NULL COMMENT '子系统',
  `name_en` varchar(40) DEFAULT NULL COMMENT '名称(英文)',
  `name_cn` varchar(400) DEFAULT NULL COMMENT '名称(中文)',
  `cycle` varchar(10) DEFAULT NULL COMMENT '周期',
  `dispatch` varchar(10) DEFAULT NULL COMMENT '调度类型',
  `time_device` varchar(10) DEFAULT NULL COMMENT '定时器',
  `strategy` varchar(40) DEFAULT NULL COMMENT '策略通道',
  `priority` int(11) DEFAULT NULL COMMENT '优先级',
  `time_window` varchar(50) DEFAULT NULL COMMENT '运行时间窗口',
  `enable` varchar(10) DEFAULT NULL COMMENT '是否可用',
  `package_id` varchar(40) DEFAULT NULL COMMENT '任务包',
  `nominal_time` datetime DEFAULT NULL COMMENT '最新运行时间',
  `status` varchar(10) DEFAULT NULL COMMENT '运行状态',
  `parameter` varchar(1000) DEFAULT NULL COMMENT '参数',
  `note` varchar(255) DEFAULT NULL COMMENT '备注',
  `online_time` datetime DEFAULT NULL COMMENT '上线时间',
  `online_user` varchar(40) DEFAULT NULL COMMENT '上线人',
  `coordinator_xml` text COMMENT 'coordinatorXml',
  PRIMARY KEY (`job_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='作业';

-- ----------------------------
-- Records of oozie_job
-- ----------------------------
INSERT INTO `oozie_job` VALUES ('20190521180905x9xISxuTrOIQHQFfgiE', '3', '1', '1', 'antest', 'antest测试', 'D', '1', null, '1', '11', '0 0 * * ?', '1', '20190516174113zbGUSfpjDg92Uztuafl', null, null, '{\"aa\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), -400, \'DAY\'), \'yyyyMMdd\')}\",\"bb\":\"2\"}', null, '2019-05-21 18:09:06', 'admin', '<coordinator-app name=\"antest\" frequency=\"0 0 * * ?\" start=\"${starttime}\" end=\"${endtime}\" timezone=\"GMT+08:00\" xmlns=\"uri:oozie:coordinator:0.2\">\n  <controls>\n    <timeout>-1</timeout>\n    <throttle>-1</throttle>\n  </controls>\n  <datasets>\n    <dataset name=\"antest_TRIGGER\" frequency=\"${coord:days(1)}\" initial-instance=\"2016-07-01T00:00+0800\" timezone=\"GMT+08:00\">\n      <uri-template>${nameNode}/user/oozie/flag/BAS/antest/D${YEAR}${MONTH}${DAY}</uri-template>\n      <done-flag></done-flag>\n    </dataset>\n  </datasets>\n  <output-events>\n    <data-out name=\"antest_OUT\" dataset=\"antest_TRIGGER\">\n      <instance>${coord:current(0)}</instance>\n    </data-out>\n  </output-events>\n  <action>\n    <workflow>\n      <app-path>hdfs://quickstart.cloudera:8020/user/atomic/oozie-app/atomic/workflow/antest</app-path>\n      <configuration>\n        <property>\n          <name>aa</name>\n          <value>${coord:formatTime(coord:dateOffset(coord:nominalTime(), -400, &apos;DAY&apos;), &apos;yyyyMMdd&apos;)}</value>\n        </property>\n        <property>\n          <name>bb</name>\n          <value>2</value>\n        </property>\n        <property>\n          <name>jobTracker</name>\n          <value>${jobTracker}</value>\n        </property>\n        <property>\n          <name>nameNode</name>\n          <value>${nameNode}</value>\n        </property>\n      </configuration>\n    </workflow>\n  </action>\n</coordinator-app>');
INSERT INTO `oozie_job` VALUES ('20190711214536R9BxQJ2r0K18X9CBVlM', '3', '1', '1', 'antest001', 'antest001', 'D', '1', null, null, null, '0 0 * * ?', '1', '201905171011047QBdFFDxyV7y5Zepjq3', null, null, '{\"TX_MONTH\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), -1, \'MONTH\'), \'yyyyMM\')}\",\"aa\":\"1\",\"CYCLE_DATE\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), -400, \'DAY\'), \'yyyyMMdd\')}\",\"TH_MONTH\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, \'MONTH\'), \'yyyyMM\')}\",\"CYCLE_MONTH\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), -13, \'MONTH\'), \'yyyyMM\')}\",\"TX_MINUTE\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, \'MINUTE\'), \'mm\')}\",\"CYCLE_DATE_FORMAT\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), -400, \'DAY\'), \'yyyy-MM-dd\')}\",\"TX_DATE_FORMAT\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, \'DAY\'), \'yyyy-MM-dd\')}\",\"TX_DATE\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, \'DAY\'), \'yyyyMMdd\')}\",\"TX_HOUR\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, \'HOUR\'), \'HH\')}\"}', null, '2019-07-11 21:45:37', 'admin', '<coordinator-app name=\"antest001\" frequency=\"* * * * *\" start=\"${starttime}\" end=\"${endtime}\" timezone=\"GMT+08:00\" xmlns=\"uri:oozie:coordinator:0.2\">\n  <controls>\n    <timeout>-1</timeout>\n    <throttle>-1</throttle>\n  </controls>\n  <datasets>\n    <dataset name=\"antest001_TRIGGER\" frequency=\"${coord:days(1)}\" initial-instance=\"2016-07-01T00:00+0800\" timezone=\"GMT+08:00\">\n      <uri-template>${nameNode}/user/oozie/flag/BAS/antest001/D${YEAR}${MONTH}${DAY}</uri-template>\n      <done-flag></done-flag>\n    </dataset>\n  </datasets>\n  <output-events>\n    <data-out name=\"antest001_OUT\" dataset=\"antest001_TRIGGER\">\n      <instance>${coord:current(0)}</instance>\n    </data-out>\n  </output-events>\n  <action>\n    <workflow>\n      <app-path>hdfs://quickstart.cloudera:8020/user/atomic/oozie-app/atomic/workflow/antest001</app-path>\n      <configuration>\n        <property>\n          <name>TX_MONTH</name>\n          <value>${coord:formatTime(coord:dateOffset(coord:nominalTime(), -1, &apos;MONTH&apos;), &apos;yyyyMM&apos;)}</value>\n        </property>\n        <property>\n          <name>aa</name>\n          <value>1</value>\n        </property>\n        <property>\n          <name>CYCLE_DATE</name>\n          <value>${coord:formatTime(coord:dateOffset(coord:nominalTime(), -400, &apos;DAY&apos;), &apos;yyyyMMdd&apos;)}</value>\n        </property>\n        <property>\n          <name>TH_MONTH</name>\n          <value>${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, &apos;MONTH&apos;), &apos;yyyyMM&apos;)}</value>\n        </property>\n        <property>\n          <name>CYCLE_MONTH</name>\n          <value>${coord:formatTime(coord:dateOffset(coord:nominalTime(), -13, &apos;MONTH&apos;), &apos;yyyyMM&apos;)}</value>\n        </property>\n        <property>\n          <name>TX_MINUTE</name>\n          <value>${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, &apos;MINUTE&apos;), &apos;mm&apos;)}</value>\n        </property>\n        <property>\n          <name>CYCLE_DATE_FORMAT</name>\n          <value>${coord:formatTime(coord:dateOffset(coord:nominalTime(), -400, &apos;DAY&apos;), &apos;yyyy-MM-dd&apos;)}</value>\n        </property>\n        <property>\n          <name>TX_DATE_FORMAT</name>\n          <value>${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, &apos;DAY&apos;), &apos;yyyy-MM-dd&apos;)}</value>\n        </property>\n        <property>\n          <name>TX_DATE</name>\n          <value>${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, &apos;DAY&apos;), &apos;yyyyMMdd&apos;)}</value>\n        </property>\n        <property>\n          <name>TX_HOUR</name>\n          <value>${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, &apos;HOUR&apos;), &apos;HH&apos;)}</value>\n        </property>\n        <property>\n          <name>jobTracker</name>\n          <value>${jobTracker}</value>\n        </property>\n        <property>\n          <name>nameNode</name>\n          <value>${nameNode}</value>\n        </property>\n      </configuration>\n    </workflow>\n  </action>\n</coordinator-app>');
INSERT INTO `oozie_job` VALUES ('20190715142113aRUZgnSlU1WhFLR4XTW', '3', '1', '1', 'antest002', 'antest002', 'M', '1', null, null, null, '0 0 1 * ?', '0', '20190715142014fbX0tX4shblXtyCp2sN', null, null, '{\"TX_MONTH\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), -1, \'MONTH\'), \'yyyyMM\')}\",\"CYCLE_DATE\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), -400, \'DAY\'), \'yyyyMMdd\')}\",\"TH_MONTH\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, \'MONTH\'), \'yyyyMM\')}\",\"CYCLE_MONTH\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), -13, \'MONTH\'), \'yyyyMM\')}\",\"TX_MINUTE\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, \'MINUTE\'), \'mm\')}\",\"CYCLE_DATE_FORMAT\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), -400, \'DAY\'), \'yyyy-MM-dd\')}\",\"TX_DATE_FORMAT\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, \'DAY\'), \'yyyy-MM-dd\')}\",\"TX_DATE\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, \'DAY\'), \'yyyyMMdd\')}\",\"TX_HOUR\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, \'HOUR\'), \'HH\')}\"}', null, '2019-07-15 14:21:14', 'admin', '<coordinator-app name=\"antest002\" frequency=\"* * * * *\" start=\"${starttime}\" end=\"${endtime}\" timezone=\"GMT+08:00\" xmlns=\"uri:oozie:coordinator:0.2\">\n  <controls>\n    <timeout>-1</timeout>\n    <throttle>-1</throttle>\n  </controls>\n  <datasets>\n    <dataset name=\"antest002_TRIGGER\" frequency=\"${coord:months(1)}\" initial-instance=\"2016-07-01T00:00+0800\" timezone=\"GMT+08:00\">\n      <uri-template>${nameNode}/user/oozie/flag/BAS/antest002/M${YEAR}${MONTH}01</uri-template>\n      <done-flag></done-flag>\n    </dataset>\n  </datasets>\n  <output-events>\n    <data-out name=\"antest002_OUT\" dataset=\"antest002_TRIGGER\">\n      <instance>${coord:current(0)}</instance>\n    </data-out>\n  </output-events>\n  <action>\n    <workflow>\n      <app-path>hdfs://quickstart.cloudera:8020/user/atomic/oozie-app/atomic/workflow/antest002</app-path>\n      <configuration>\n        <property>\n          <name>TX_MONTH</name>\n          <value>${coord:formatTime(coord:dateOffset(coord:nominalTime(), -1, &apos;MONTH&apos;), &apos;yyyyMM&apos;)}</value>\n        </property>\n        <property>\n          <name>CYCLE_DATE</name>\n          <value>${coord:formatTime(coord:dateOffset(coord:nominalTime(), -400, &apos;DAY&apos;), &apos;yyyyMMdd&apos;)}</value>\n        </property>\n        <property>\n          <name>TH_MONTH</name>\n          <value>${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, &apos;MONTH&apos;), &apos;yyyyMM&apos;)}</value>\n        </property>\n        <property>\n          <name>CYCLE_MONTH</name>\n          <value>${coord:formatTime(coord:dateOffset(coord:nominalTime(), -13, &apos;MONTH&apos;), &apos;yyyyMM&apos;)}</value>\n        </property>\n        <property>\n          <name>TX_MINUTE</name>\n          <value>${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, &apos;MINUTE&apos;), &apos;mm&apos;)}</value>\n        </property>\n        <property>\n          <name>CYCLE_DATE_FORMAT</name>\n          <value>${coord:formatTime(coord:dateOffset(coord:nominalTime(), -400, &apos;DAY&apos;), &apos;yyyy-MM-dd&apos;)}</value>\n        </property>\n        <property>\n          <name>TX_DATE_FORMAT</name>\n          <value>${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, &apos;DAY&apos;), &apos;yyyy-MM-dd&apos;)}</value>\n        </property>\n        <property>\n          <name>TX_DATE</name>\n          <value>${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, &apos;DAY&apos;), &apos;yyyyMMdd&apos;)}</value>\n        </property>\n        <property>\n          <name>TX_HOUR</name>\n          <value>${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, &apos;HOUR&apos;), &apos;HH&apos;)}</value>\n        </property>\n        <property>\n          <name>jobTracker</name>\n          <value>${jobTracker}</value>\n        </property>\n        <property>\n          <name>nameNode</name>\n          <value>${nameNode}</value>\n        </property>\n      </configuration>\n    </workflow>\n  </action>\n</coordinator-app>');
INSERT INTO `oozie_job` VALUES ('20190715181251XLI45xlsLxUikgfFHVK', '3', '1', '1', 'antest003', 'antest003', 'H', '1', null, null, null, '0 * * * *', '0', '20190715181159OD2FGIzr7F9k3gkx1l1', null, null, '{\"CYCLE_MONTH\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), -13, \'MONTH\'), \'yyyyMM\')}\",\"CYCLE_DATE\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), -400, \'DAY\'), \'yyyyMMdd\')}\",\"TX_MINUTE\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, \'MINUTE\'), \'mm\')}\",\"TX_DATE\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, \'DAY\'), \'yyyyMMdd\')}\",\"TX_HOUR\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, \'HOUR\'), \'HH\')}\",\"TH_MONTH\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, \'MONTH\'), \'yyyyMM\')}\",\"TX_DATE_FORMAT\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), 0, \'DAY\'), \'yyyy-MM-dd\')}\",\"CYCLE_DATE_FORMAT\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), -400, \'DAY\'), \'yyyy-MM-dd\')}\",\"TX_MONTH\":\"${coord:formatTime(coord:dateOffset(coord:nominalTime(), -1, \'MONTH\'), \'yyyyMM\')}\"}', null, '2019-07-15 18:12:52', 'admin', null);

-- ----------------------------
-- Table structure for oozie_job_depedency
-- ----------------------------
DROP TABLE IF EXISTS `oozie_job_depedency`;
CREATE TABLE `oozie_job_depedency` (
  `id` varchar(40) NOT NULL,
  `job_id` varchar(40) NOT NULL COMMENT '作业ID',
  `depedency_id` varchar(40) DEFAULT NULL COMMENT '依赖作业ID',
  `subsystem_id` int(11) DEFAULT NULL COMMENT '子系统',
  `depedency_name_en` varchar(40) DEFAULT NULL COMMENT '依赖作业名称(En)',
  `depedency_name_cn` varchar(100) DEFAULT NULL COMMENT '依赖作业名称(Cn)',
  `cycle` varchar(10) DEFAULT NULL COMMENT '周期',
  `status` varchar(10) DEFAULT NULL COMMENT '运行状态',
  `start_time` datetime DEFAULT NULL COMMENT '开始时间',
  `end_time` datetime DEFAULT NULL COMMENT '结束时间',
  `dur_time` varchar(255) DEFAULT NULL COMMENT '运行时长',
  `yarn_queue` varchar(40) DEFAULT NULL COMMENT '资源队列',
  `enable` varchar(10) DEFAULT NULL COMMENT '是否启用',
  PRIMARY KEY (`id`),
  KEY `fk_job_id` (`job_id`),
  CONSTRAINT `fk_job_id` FOREIGN KEY (`job_id`) REFERENCES `oozie_job` (`job_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='作业依赖关系表';

-- ----------------------------
-- Records of oozie_job_depedency
-- ----------------------------

-- ----------------------------
-- Table structure for oozie_package_template
-- ----------------------------
DROP TABLE IF EXISTS `oozie_package_template`;
CREATE TABLE `oozie_package_template` (
  `package_id` varchar(40) NOT NULL COMMENT '唯一标识',
  `package_type` varchar(10) DEFAULT NULL COMMENT '任务包类型',
  `package_status` varchar(10) DEFAULT NULL COMMENT '任务包状态',
  `name_en` varchar(50) DEFAULT NULL COMMENT '包名(en)',
  `name_cn` varchar(100) DEFAULT NULL COMMENT '包名(cn)',
  `project_id` int(11) DEFAULT NULL COMMENT '项目ID',
  `con_hive2_id` varchar(11) DEFAULT NULL COMMENT 'HIVE2认证',
  `con_hcatalog_id` varchar(11) DEFAULT NULL COMMENT 'hcatlog认证',
  `con_hbase_id` varchar(11) DEFAULT NULL COMMENT 'hbase认证',
  `workflow_json` text COMMENT 'json流程格式',
  `workflow_xml` text COMMENT 'xml流程格式',
  `detection` varchar(40) DEFAULT NULL COMMENT '检出人',
  `note` varchar(255) DEFAULT NULL COMMENT '描述',
  `create_user` varchar(40) DEFAULT NULL COMMENT '创建者',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  `update_user` varchar(40) DEFAULT NULL COMMENT '修改者',
  `update_time` datetime DEFAULT NULL COMMENT '修改时间',
  PRIMARY KEY (`package_id`),
  KEY `fk_project_id` (`project_id`),
  CONSTRAINT `fk_project_id` FOREIGN KEY (`project_id`) REFERENCES `hadoop_project` (`project_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='任务包';

-- ----------------------------
-- Records of oozie_package_template
-- ----------------------------
INSERT INTO `oozie_package_template` VALUES ('20190516174113zbGUSfpjDg92Uztuafl', '1', '3', 'antest', '测试包', '1', 'on', 'on', 'on', '{\"node\":[{\"x\":20,\"y\":20,\"text\":\"start\",\"type\":\"start\",\"nodeid\":1},{\"x\":753,\"y\":458,\"text\":\"end\",\"type\":\"end\",\"nodeid\":2},{\"x\":371,\"y\":237,\"text\":\"hive21\",\"type\":\"15\",\"nodeid\":3,\"attribute\":{\"jdbc-url\":\"jdbc:hive2://quickstart.cloudera:10000/default;principal=hive/quickstart.cloudera@CLOUDERA\",\"password\":\"\",\"script\":\"${nameNode}/user/atomic/oozie-app/atomic/hivesql/antest/antest_3.sql\",\"param\":\"\",\"job-xml\":\"\",\"delete\":\"\",\"mkdir\":[\"\",\"\"],\"mapred.map.child.java.opts\":\"\",\"mapred.reduce.child.java.opts\":\"\",\"file\":\"\",\"archives\":\"\",\"arguments\":\"\",\"queue\":\"atomic\"},\"retryMax\":\"1\",\"retryInt\":\"10\",\"cred\":\"hive2_credential\"}],\"linkarray\":[{\"node1id\":1,\"node2id\":3},{\"node1id\":3,\"node2id\":2}]}', '<?xml version=\'1.0\' encoding=\'UTF-8\'?>\n<workflow-app name=\"antest\" xmlns=\"uri:oozie:workflow:0.5\">\n  <credentials>\n    <credential name=\"hbase\" type=\"hbase\"/>\n    <credential name=\"hcat_credential\" type=\"hcat\">\n      <property>\n        <name>hcat.metastore.uri</name>\n        <value>thirft://quickstart.cloudera:9083</value>\n      </property>\n      <property>\n        <name>hcat.metastore.principal</name>\n        <value>hive/_HOST@CLOUDERA</value>\n      </property>\n    </credential>\n    <credential name=\"hive2_credential\" type=\"hive2\">\n      <property>\n        <name>hive2.jdbc.url</name>\n        <value>jdbc:hive2://quickstart.cloudera:10000/default</value>\n      </property>\n      <property>\n        <name>hive2.server.principal</name>\n        <value>hive/quickstart.cloudera@CLOUDERA</value>\n      </property>\n    </credential>\n  </credentials>\n  <start to=\"hive21\"/>\n  <action name=\"hive21\" cred=\"hive2_credential\" retry-max=\"1\" retry-interval=\"10\">\n    <hive2 xmlns=\"uri:oozie:hive2-action:0.1\">\n      <job-tracker>${jobTracker}</job-tracker>\n      <name-node>${nameNode}</name-node>\n      <prepare>\n        <mkdir path=\"[&quot;&quot;,&quot;&quot;]\"/>\n      </prepare>\n      <configuration>\n        <property>\n          <name>mapred.job.queue.name</name>\n          <value>atomic</value>\n        </property>\n        <property>\n          <name>mapreduce.job.queuename</name>\n          <value>atomic</value>\n        </property>\n      </configuration>\n      <jdbc-url>jdbc:hive2://quickstart.cloudera:10000/default;principal=hive/quickstart.cloudera@CLOUDERA</jdbc-url>\n      <script>${nameNode}/user/atomic/oozie-app/atomic/hivesql/antest/antest_3.sql</script>\n    </hive2>\n    <ok to=\"end\"/>\n    <error to=\"fail\"/>\n  </action>\n  <kill name=\"fail\">\n    <message>Workflow failed, error message[${wf:errorMessage(wf:lastErrorNode())}]</message>\n  </kill>\n  <end name=\"end\"/>\n</workflow-app>', 'admin', '测试包', 'admin', '2019-05-16 17:41:13', null, null);
INSERT INTO `oozie_package_template` VALUES ('201905171011047QBdFFDxyV7y5Zepjq3', '1', '2', 'antest001', 'antest001测试包', '1', 'on', null, null, '{\"node\":[{\"x\":20,\"y\":20,\"text\":\"start\",\"type\":\"start\",\"nodeid\":1},{\"x\":753,\"y\":458,\"text\":\"end\",\"type\":\"end\",\"nodeid\":2},{\"x\":341,\"y\":211,\"text\":\"fs1\",\"type\":\"1\",\"nodeid\":3,\"attribute\":{\"fs_delete\":\"/user/example/data.txt\",\"fs_mkdir\":\"\",\"move\":\"\",\"chmod\":\"\",\"touchz\":\"\",\"chgrp\":\"\",\"queue\":\"atomic\"}}],\"linkarray\":[{\"node1id\":1,\"node2id\":3},{\"node1id\":3,\"node2id\":2}]}', '<?xml version=\'1.0\' encoding=\'UTF-8\'?>\n<workflow-app name=\"antest001\" xmlns=\"uri:oozie:workflow:0.5\">\n  <start to=\"fs1\"/>\n  <action name=\"fs1\">\n    <fs>\n      <name-node>${nameNode}</name-node>\n      <configuration>\n        <property>\n          <name>mapred.job.queue.name</name>\n          <value>atomic</value>\n        </property>\n        <property>\n          <name>mapreduce.job.queuename</name>\n          <value>atomic</value>\n        </property>\n      </configuration>\n      <delete path=\"/user/example/data.txt\"/>\n    </fs>\n    <ok to=\"end\"/>\n    <error to=\"fail\"/>\n  </action>\n  <kill name=\"fail\">\n    <message>Workflow failed, error message[${wf:errorMessage(wf:lastErrorNode())}]</message>\n  </kill>\n  <end name=\"end\"/>\n</workflow-app>', 'admin', 'antest001测试包', 'admin', '2019-05-17 10:11:05', null, null);
INSERT INTO `oozie_package_template` VALUES ('20190517150516C0sARKXPiqMDG5nJztL', '1', '1', 'tb_mid_par_user_mon', '月用户表', '1', 'on', 'on', null, null, null, null, 'sfsdfsd', 'admin', '2019-05-17 15:05:17', null, null);
INSERT INTO `oozie_package_template` VALUES ('20190715142014fbX0tX4shblXtyCp2sN', '1', '2', 'antest002', 'antest002', '1', 'on', 'on', 'on', '{\"node\":[{\"x\":20,\"y\":20,\"text\":\"start\",\"type\":\"start\",\"nodeid\":1},{\"x\":753,\"y\":458,\"text\":\"end\",\"type\":\"end\",\"nodeid\":2},{\"x\":348,\"y\":224,\"text\":\"hive21\",\"type\":\"15\",\"nodeid\":3,\"attribute\":{\"jdbc-url\":\"jdbc:hive2://192.168.20.203:10000/default;principal=hive/quickstart@CLOUDERA\",\"password\":\"\",\"script\":\"${nameNode}/user/atomic/oozie-app/atomic/hivesql/antest002_3.sql\",\"param\":\"\",\"job-xml\":\"\",\"delete\":\"\",\"mkdir\":[\"\",\"\"],\"mapred.map.child.java.opts\":\"\",\"mapred.reduce.child.java.opts\":\"\",\"file\":\"\",\"archives\":\"\",\"arguments\":\"\",\"queue\":\"atomic\"},\"cred\":\"11\"}],\"linkarray\":[{\"node1id\":1,\"node2id\":3},{\"node1id\":3,\"node2id\":2}]}', '<?xml version=\'1.0\' encoding=\'UTF-8\'?>\n<workflow-app name=\"antest002\" xmlns=\"uri:oozie:workflow:0.5\">\n  <start to=\"hive21\"/>\n  <action name=\"hive21\" cred=\"11\">\n    <hive2 xmlns=\"uri:oozie:hive2-action:0.1\">\n      <job-tracker>${jobTracker}</job-tracker>\n      <name-node>${nameNode}</name-node>\n      <prepare>\n        <mkdir path=\"[&quot;&quot;,&quot;&quot;]\"/>\n      </prepare>\n      <configuration>\n        <property>\n          <name>mapred.job.queue.name</name>\n          <value>atomic</value>\n        </property>\n        <property>\n          <name>mapreduce.job.queuename</name>\n          <value>atomic</value>\n        </property>\n      </configuration>\n      <jdbc-url>jdbc:hive2://192.168.20.203:10000/default;principal=hive/quickstart@CLOUDERA</jdbc-url>\n      <script>${nameNode}/user/atomic/oozie-app/atomic/hivesql/antest002_3.sql</script>\n    </hive2>\n    <ok to=\"end\"/>\n    <error to=\"fail\"/>\n  </action>\n  <kill name=\"fail\">\n    <message>Workflow failed, error message[${wf:errorMessage(wf:lastErrorNode())}]</message>\n  </kill>\n  <end name=\"end\"/>\n</workflow-app>', 'admin', null, 'admin', '2019-07-15 14:20:14', null, null);
INSERT INTO `oozie_package_template` VALUES ('20190715181159OD2FGIzr7F9k3gkx1l1', '1', '2', 'antest003', 'antest003', '1', 'on', null, null, '{\"node\":[{\"x\":20,\"y\":20,\"text\":\"start\",\"type\":\"start\",\"nodeid\":1},{\"x\":753,\"y\":458,\"text\":\"end\",\"type\":\"end\",\"nodeid\":2},{\"x\":341,\"y\":213,\"text\":\"hive21\",\"type\":\"15\",\"nodeid\":3,\"attribute\":{\"jdbc-url\":\"jdbc:hive2://192.168.20.203:10000/default;principal=hive/quickstart@CLOUDERA\",\"password\":\"\",\"script\":\"${nameNode}/user/atomic/oozie-app/atomic/hivesql/antest003_3.sql\",\"param\":\"\",\"job-xml\":\"\",\"delete\":\"\",\"mkdir\":[\"\",\"\"],\"mapred.map.child.java.opts\":\"\",\"mapred.reduce.child.java.opts\":\"\",\"file\":\"\",\"archives\":\"\",\"arguments\":\"\",\"queue\":\"atomic\"},\"cred\":\"11\"}],\"linkarray\":[{\"node1id\":1,\"node2id\":3},{\"node1id\":3,\"node2id\":2}]}', '<?xml version=\'1.0\' encoding=\'UTF-8\'?>\n<workflow-app name=\"antest003\" xmlns=\"uri:oozie:workflow:0.5\">\n  <start to=\"hive21\"/>\n  <action name=\"hive21\" cred=\"11\">\n    <hive2 xmlns=\"uri:oozie:hive2-action:0.1\">\n      <job-tracker>${jobTracker}</job-tracker>\n      <name-node>${nameNode}</name-node>\n      <prepare>\n        <mkdir path=\"[&quot;&quot;,&quot;&quot;]\"/>\n      </prepare>\n      <configuration>\n        <property>\n          <name>mapred.job.queue.name</name>\n          <value>atomic</value>\n        </property>\n        <property>\n          <name>mapreduce.job.queuename</name>\n          <value>atomic</value>\n        </property>\n      </configuration>\n      <jdbc-url>jdbc:hive2://192.168.20.203:10000/default;principal=hive/quickstart@CLOUDERA</jdbc-url>\n      <script>${nameNode}/user/atomic/oozie-app/atomic/hivesql/antest003_3.sql</script>\n    </hive2>\n    <ok to=\"end\"/>\n    <error to=\"fail\"/>\n  </action>\n  <kill name=\"fail\">\n    <message>Workflow failed, error message[${wf:errorMessage(wf:lastErrorNode())}]</message>\n  </kill>\n  <end name=\"end\"/>\n</workflow-app>', 'admin', null, 'admin', '2019-07-15 18:12:00', null, null);

-- ----------------------------
-- Table structure for oozie_strategy
-- ----------------------------
DROP TABLE IF EXISTS `oozie_strategy`;
CREATE TABLE `oozie_strategy` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '唯一标识',
  `platform_id` int(11) DEFAULT NULL COMMENT '集群平台',
  `strategy_class` varchar(64) DEFAULT NULL COMMENT '策略类',
  `strategy_name` varchar(64) DEFAULT NULL COMMENT '策略名',
  `method_name` varchar(50) DEFAULT NULL COMMENT '方法名',
  `max_count` int(11) DEFAULT NULL COMMENT '最大并发数',
  `cron_expression` varchar(100) DEFAULT NULL COMMENT 'cron执行表达式',
  `misfire_policy` varchar(20) DEFAULT '3' COMMENT '计划执行错误策略（1立即执行 2执行一次 3放弃执行）',
  `concurrent` char(1) DEFAULT '1' COMMENT '是否并发执行（0允许 1禁止）',
  `status` char(1) DEFAULT '0' COMMENT '状态（0正常 1暂停）',
  `create_user` varchar(64) CHARACTER SET utf32 DEFAULT NULL COMMENT '创建人',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  `update_user` varchar(64) DEFAULT NULL COMMENT '更新人',
  `update_time` datetime DEFAULT NULL COMMENT '更新时间',
  `remark` varchar(500) DEFAULT NULL COMMENT '备注',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 COMMENT='策略通道';

-- ----------------------------
-- Records of oozie_strategy
-- ----------------------------
INSERT INTO `oozie_strategy` VALUES ('1', '3', 'atomicTask', '测试', 'executHadoopOozieJob', '1', '0/10 * * * * ?', '1', '1', '0', null, null, 'admin', '2019-06-24 18:30:04', '1111');

-- ----------------------------
-- Table structure for oozie_subsystem
-- ----------------------------
DROP TABLE IF EXISTS `oozie_subsystem`;
CREATE TABLE `oozie_subsystem` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '唯一标识',
  `name_en` varchar(10) DEFAULT NULL COMMENT '英文(简称)',
  `name_en_full` varchar(100) DEFAULT NULL COMMENT '英文(全称)',
  `name_cn` varchar(100) DEFAULT NULL COMMENT '名称(中文)',
  `order_no` int(11) DEFAULT NULL COMMENT '顺序号',
  `create_user` varchar(50) DEFAULT NULL COMMENT '创建者',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  `update_user` varchar(50) DEFAULT NULL COMMENT '更新者',
  `update_time` datetime DEFAULT NULL COMMENT '更新时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8 COMMENT='子系统';

-- ----------------------------
-- Records of oozie_subsystem
-- ----------------------------
INSERT INTO `oozie_subsystem` VALUES ('1', 'BAS', null, '加载层', '1', 'admin', '2019-05-19 16:15:20', 'admin', '2019-06-13 14:16:02');
INSERT INTO `oozie_subsystem` VALUES ('2', 'MID', null, '中间数据集市层', '3', 'admin', '2019-05-19 16:16:00', 'admin', '2019-05-19 16:16:30');
INSERT INTO `oozie_subsystem` VALUES ('3', 'MDL', null, '汇总层', '2', 'admin', '2019-05-19 16:16:24', null, null);
INSERT INTO `oozie_subsystem` VALUES ('4', 'CDE', null, '数据字典层', '4', 'admin', '2019-05-19 16:16:58', null, null);
INSERT INTO `oozie_subsystem` VALUES ('5', 'CDR', null, '话单汇总层', '5', 'admin', '2019-05-19 16:17:39', null, null);
INSERT INTO `oozie_subsystem` VALUES ('6', 'RPT', null, '报表层', '6', 'admin', '2019-06-13 14:16:24', null, null);

-- ----------------------------
-- Table structure for sys_config
-- ----------------------------
DROP TABLE IF EXISTS `sys_config`;
CREATE TABLE `sys_config` (
  `config_id` int(5) NOT NULL AUTO_INCREMENT COMMENT '参数主键',
  `config_name` varchar(100) DEFAULT '' COMMENT '参数名称',
  `config_key` varchar(100) DEFAULT '' COMMENT '参数键名',
  `config_value` varchar(100) DEFAULT '' COMMENT '参数键值',
  `config_type` char(1) DEFAULT 'N' COMMENT '系统内置（Y是 N否）',
  `create_by` varchar(64) DEFAULT '' COMMENT '创建者',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  `update_by` varchar(64) DEFAULT '' COMMENT '更新者',
  `update_time` datetime DEFAULT NULL COMMENT '更新时间',
  `remark` varchar(500) DEFAULT NULL COMMENT '备注',
  PRIMARY KEY (`config_id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COMMENT='参数配置表';

-- ----------------------------
-- Records of sys_config
-- ----------------------------
INSERT INTO `sys_config` VALUES ('1', '主框架页-默认皮肤样式名称', 'sys.index.skinName', 'skin-blue', 'Y', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '蓝色 skin-blue、绿色 skin-green、紫色 skin-purple、红色 skin-red、黄色 skin-yellow');
INSERT INTO `sys_config` VALUES ('2', '用户管理-账号初始密码', 'sys.user.initPassword', '123456', 'Y', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '初始化密码 123456');

-- ----------------------------
-- Table structure for sys_dept
-- ----------------------------
DROP TABLE IF EXISTS `sys_dept`;
CREATE TABLE `sys_dept` (
  `dept_id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '部门id',
  `parent_id` bigint(20) DEFAULT '0' COMMENT '父部门id',
  `ancestors` varchar(50) DEFAULT '' COMMENT '祖级列表',
  `dept_name` varchar(10) DEFAULT '' COMMENT '组织名',
  `dept_full_name` varchar(100) DEFAULT NULL COMMENT '组织全名',
  `order_num` int(4) DEFAULT '0' COMMENT '显示顺序',
  `leader` varchar(20) DEFAULT NULL COMMENT '负责人',
  `phone` varchar(11) DEFAULT NULL COMMENT '联系电话',
  `email` varchar(50) DEFAULT NULL COMMENT '邮箱',
  `status` char(1) DEFAULT '0' COMMENT '部门状态（0正常 1停用）',
  `del_flag` char(1) DEFAULT '0' COMMENT '删除标志（0代表存在 2代表删除）',
  `create_by` varchar(64) DEFAULT '' COMMENT '创建者',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  `update_by` varchar(64) DEFAULT '' COMMENT '更新者',
  `update_time` datetime DEFAULT NULL COMMENT '更新时间',
  PRIMARY KEY (`dept_id`)
) ENGINE=InnoDB AUTO_INCREMENT=118 DEFAULT CHARSET=utf8 COMMENT='部门表';

-- ----------------------------
-- Records of sys_dept
-- ----------------------------
INSERT INTO `sys_dept` VALUES ('100', '0', '0', 'Atomic系统平台', null, '0', 'Atomic', '15888888888', 'atomic@qq.com', '0', '0', 'admin', '2019-04-13 11:33:00', 'admin', '2019-04-27 12:06:45');
INSERT INTO `sys_dept` VALUES ('101', '100', '0,100', '局方组织', null, '1', 'Atomic', '15888888888', 'atomic@qq.com', '0', '0', 'admin', '2019-04-13 11:33:00', 'admin', '2019-04-27 12:04:48');
INSERT INTO `sys_dept` VALUES ('102', '100', '0,100', '厂商组织', null, '2', 'Atomic', '15888888888', 'atomic@qq.com', '0', '0', 'admin', '2019-04-13 11:33:00', 'admin', '2019-04-27 12:06:45');
INSERT INTO `sys_dept` VALUES ('103', '101', '0,100,101', '资能室', '移动资能室', '1', 'lushan', '15888888888', 'lushan@sx.chinamobile.com', '0', '0', 'admin', '2019-04-13 11:33:00', 'admin', '2019-04-27 12:03:32');
INSERT INTO `sys_dept` VALUES ('104', '101', '0,100,101', '安全管理室', '移动安全管理室', '2', 'Atomic', '15888888888', 'atomic@qq.com', '0', '0', 'admin', '2019-04-13 11:33:00', 'admin', '2019-04-27 12:03:46');
INSERT INTO `sys_dept` VALUES ('105', '101', '0,100,101', '经营分析支撑室', '移动经营分析支撑室', '3', 'Atomic', '15888888888', 'atomic@qq.com', '0', '0', 'admin', '2019-04-13 11:33:00', 'admin', '2019-04-27 12:03:58');
INSERT INTO `sys_dept` VALUES ('106', '101', '0,100,101', '应用维护室', '移动应用维护室', '4', 'Atomic', '15888888888', 'atomic@qq.com', '0', '0', 'admin', '2019-04-13 11:33:00', 'admin', '2019-04-27 12:04:16');
INSERT INTO `sys_dept` VALUES ('107', '101', '0,100,101', '综合业务支撑室', '移动综合业务支撑室', '5', 'Atomic', '15888888888', 'atomic@qq.com', '0', '0', 'admin', '2019-04-13 11:33:00', 'admin', '2019-04-27 12:04:24');
INSERT INTO `sys_dept` VALUES ('108', '102', '0,100,102', '华为', '中国华为科技公司', '1', 'Atomic', '15888888888', 'atomic@qq.com', '0', '0', 'admin', '2019-04-13 11:33:00', 'admin', '2019-04-27 12:02:16');
INSERT INTO `sys_dept` VALUES ('109', '102', '0,100,102', '财务部门', null, '2', 'Atomic', '15888888888', 'atomic@qq.com', '0', '2', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00');
INSERT INTO `sys_dept` VALUES ('110', '102', '0,100,102', 'Teradata', '北京天睿信科', '2', 'Teradata天睿公司', '', '', '0', '0', 'admin', '2019-04-14 11:58:00', 'admin', '2019-04-27 12:02:44');
INSERT INTO `sys_dept` VALUES ('112', '102', '0,100,102', 'Sitech', '北京思特奇信息技术股份有限公司', '3', 'lijj', '18223222222', 'lijj@si-tech.com', '0', '0', 'admin', '2019-04-25 21:44:11', 'admin', '2019-04-27 12:03:01');
INSERT INTO `sys_dept` VALUES ('113', '102', '0,100,102', '财务部门财务部门部门', '东方国信', '0', null, null, null, '0', '2', '', null, '', null);
INSERT INTO `sys_dept` VALUES ('114', '101', '0,100,101', '平台运维室', '移动平台运维室', '6', 'Atomic', '18888888888', 'atomic@atomic.com', '0', '0', 'admin', '2019-04-27 10:36:25', 'admin', '2019-04-27 12:04:40');
INSERT INTO `sys_dept` VALUES ('115', '101', '0,100,101', '网络部', '移动网络部', '7', 'Atomic', '18888888888', 'atomic@atomic.com', '0', '0', 'admin', '2019-04-27 10:37:10', 'admin', '2019-04-27 12:04:48');
INSERT INTO `sys_dept` VALUES ('116', '102', '0,100,102', 'Teradata', '北京天睿信科', '4', '张心治', '15888888888', 'atomic@qq.com', '0', '2', 'admin', '2019-04-27 11:59:52', '', null);
INSERT INTO `sys_dept` VALUES ('117', '102', '0,100,102', 'Bonc', '北京东方国信信息技术股份有限公司', '4', 'Atomic', '15888888884', 'atomic@qq.com', '0', '0', 'admin', '2019-04-27 12:06:25', 'admin', '2019-04-27 12:06:45');

-- ----------------------------
-- Table structure for sys_dict_data
-- ----------------------------
DROP TABLE IF EXISTS `sys_dict_data`;
CREATE TABLE `sys_dict_data` (
  `dict_code` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '字典编码',
  `dict_sort` int(4) DEFAULT '0' COMMENT '字典排序',
  `dict_label` varchar(100) DEFAULT '' COMMENT '字典标签',
  `dict_value` varchar(100) DEFAULT '' COMMENT '字典键值',
  `dict_type` varchar(100) DEFAULT '' COMMENT '字典类型',
  `css_class` varchar(100) DEFAULT NULL COMMENT '样式属性（其他样式扩展）',
  `list_class` varchar(100) DEFAULT NULL COMMENT '表格回显样式',
  `is_default` char(1) DEFAULT 'N' COMMENT '是否默认（Y是 N否）',
  `status` char(1) DEFAULT '0' COMMENT '状态（0正常 1停用）',
  `create_by` varchar(64) DEFAULT '' COMMENT '创建者',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  `update_by` varchar(64) DEFAULT '' COMMENT '更新者',
  `update_time` datetime DEFAULT NULL COMMENT '更新时间',
  `remark` varchar(500) DEFAULT NULL COMMENT '备注',
  PRIMARY KEY (`dict_code`)
) ENGINE=InnoDB AUTO_INCREMENT=60 DEFAULT CHARSET=utf8 COMMENT='字典数据表';

-- ----------------------------
-- Records of sys_dict_data
-- ----------------------------
INSERT INTO `sys_dict_data` VALUES ('1', '1', '男', '0', 'sys_user_sex', '', '', 'Y', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '性别男');
INSERT INTO `sys_dict_data` VALUES ('2', '2', '女', '1', 'sys_user_sex', '', '', 'N', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '性别女');
INSERT INTO `sys_dict_data` VALUES ('3', '3', '未知', '2', 'sys_user_sex', '', '', 'N', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '性别未知');
INSERT INTO `sys_dict_data` VALUES ('4', '1', '显示', '0', 'sys_show_hide', '', 'primary', 'Y', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '显示菜单');
INSERT INTO `sys_dict_data` VALUES ('5', '2', '隐藏', '1', 'sys_show_hide', '', 'danger', 'N', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '隐藏菜单');
INSERT INTO `sys_dict_data` VALUES ('6', '1', '正常', '0', 'sys_normal_disable', '', 'primary', 'Y', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '正常状态');
INSERT INTO `sys_dict_data` VALUES ('7', '2', '停用', '1', 'sys_normal_disable', '', 'danger', 'N', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '停用状态');
INSERT INTO `sys_dict_data` VALUES ('8', '1', '正常', '0', 'sys_job_status', '', 'primary', 'Y', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '正常状态');
INSERT INTO `sys_dict_data` VALUES ('9', '2', '暂停', '1', 'sys_job_status', '', 'danger', 'N', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '停用状态');
INSERT INTO `sys_dict_data` VALUES ('10', '1', '是', 'Y', 'sys_yes_no', '', 'primary', 'Y', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '系统默认是');
INSERT INTO `sys_dict_data` VALUES ('11', '2', '否', 'N', 'sys_yes_no', '', 'danger', 'N', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '系统默认否');
INSERT INTO `sys_dict_data` VALUES ('12', '1', '通知', '1', 'sys_notice_type', '', 'warning', 'Y', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '通知');
INSERT INTO `sys_dict_data` VALUES ('13', '2', '公告', '2', 'sys_notice_type', '', 'success', 'N', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '公告');
INSERT INTO `sys_dict_data` VALUES ('14', '1', '正常', '0', 'sys_notice_status', '', 'primary', 'Y', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '正常状态');
INSERT INTO `sys_dict_data` VALUES ('15', '2', '关闭', '1', 'sys_notice_status', '', 'danger', 'N', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '关闭状态');
INSERT INTO `sys_dict_data` VALUES ('16', '1', '新增', '1', 'sys_oper_type', '', 'info', 'N', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '新增操作');
INSERT INTO `sys_dict_data` VALUES ('17', '2', '修改', '2', 'sys_oper_type', '', 'info', 'N', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '修改操作');
INSERT INTO `sys_dict_data` VALUES ('18', '3', '删除', '3', 'sys_oper_type', '', 'danger', 'N', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '删除操作');
INSERT INTO `sys_dict_data` VALUES ('19', '4', '授权', '4', 'sys_oper_type', '', 'primary', 'N', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '授权操作');
INSERT INTO `sys_dict_data` VALUES ('20', '5', '导出', '5', 'sys_oper_type', '', 'warning', 'N', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '导出操作');
INSERT INTO `sys_dict_data` VALUES ('21', '6', '导入', '6', 'sys_oper_type', '', 'warning', 'N', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '导入操作');
INSERT INTO `sys_dict_data` VALUES ('22', '7', '强退', '7', 'sys_oper_type', '', 'danger', 'N', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '强退操作');
INSERT INTO `sys_dict_data` VALUES ('23', '8', '生成代码', '8', 'sys_oper_type', '', 'warning', 'N', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '生成操作');
INSERT INTO `sys_dict_data` VALUES ('24', '9', '清空数据', '9', 'sys_oper_type', '', 'danger', 'N', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '清空操作');
INSERT INTO `sys_dict_data` VALUES ('25', '1', '成功', '0', 'sys_common_status', '', 'primary', 'N', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '正常状态');
INSERT INTO `sys_dict_data` VALUES ('26', '2', '失败', '1', 'sys_common_status', '', 'danger', 'N', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '停用状态');
INSERT INTO `sys_dict_data` VALUES ('27', '2', 'Yes', '1', 'hadoop_kerberos', '是', 'success', 'Y', '0', 'admin', '2019-04-19 18:08:41', 'admin', '2019-04-21 19:02:35', 'Hadoop平台开启kerberos认证');
INSERT INTO `sys_dict_data` VALUES ('28', '1', 'No', '0', 'hadoop_kerberos', '否', 'warning', 'Y', '0', 'admin', '2019-04-19 18:09:45', 'admin', '2019-04-21 19:02:39', 'Hadoop平台未开启kerberos认证');
INSERT INTO `sys_dict_data` VALUES ('29', '2', '可用', '1', 'hadoop_enable', '', 'success', 'Y', '0', 'admin', '2019-04-20 10:43:35', 'admin', '2019-04-21 18:57:10', '');
INSERT INTO `sys_dict_data` VALUES ('30', '1', '不可用', '0', 'hadoop_enable', '', 'danger', 'Y', '0', 'admin', '2019-04-20 10:44:03', 'admin', '2019-04-21 18:57:05', '');
INSERT INTO `sys_dict_data` VALUES ('31', '2', '是', '1', 'hadoop_proxy', '', 'success', 'Y', '0', 'admin', '2019-04-20 10:47:13', 'admin', '2019-04-20 11:57:46', '');
INSERT INTO `sys_dict_data` VALUES ('32', '1', '否', '0', 'hadoop_proxy', '', 'primary', 'Y', '0', 'admin', '2019-04-20 10:47:30', 'admin', '2019-04-20 11:57:41', '');
INSERT INTO `sys_dict_data` VALUES ('33', '2', '进行中', '1', 'project_status', '', 'info', 'Y', '0', 'admin', '2019-04-27 00:06:53', 'admin', '2019-04-27 00:07:29', '');
INSERT INTO `sys_dict_data` VALUES ('34', '1', '已完工', '0', 'project_status', null, 'success', 'Y', '0', 'admin', '2019-04-27 00:07:17', '', null, null);
INSERT INTO `sys_dict_data` VALUES ('35', '3', '已取消', '2', 'project_status', null, 'danger', 'Y', '0', 'admin', '2019-04-27 00:08:39', '', null, null);
INSERT INTO `sys_dict_data` VALUES ('36', '1', 'cluster', 'cluster', 'spark_mode', null, null, 'Y', '0', 'admin', '2019-05-09 01:50:42', '', null, null);
INSERT INTO `sys_dict_data` VALUES ('37', '2', 'client', 'client', 'spark_mode', null, null, 'Y', '0', 'admin', '2019-05-09 01:50:53', '', null, null);
INSERT INTO `sys_dict_data` VALUES ('38', '1', '普通包', '1', 'package_type', null, null, 'Y', '0', 'admin', '2019-05-15 16:57:06', '', null, null);
INSERT INTO `sys_dict_data` VALUES ('39', '2', '模板包', '2', 'package_type', null, null, 'Y', '0', 'admin', '2019-05-15 16:57:30', '', null, null);
INSERT INTO `sys_dict_data` VALUES ('40', '3', '扩展包', '3', 'package_type', null, null, 'Y', '0', 'admin', '2019-05-15 16:57:42', '', null, null);
INSERT INTO `sys_dict_data` VALUES ('41', '1', '新建', '1', 'package_status', '', 'primary', 'Y', '0', 'admin', '2019-05-17 09:40:55', 'admin', '2019-05-17 09:59:30', '');
INSERT INTO `sys_dict_data` VALUES ('42', '2', '已设计', '2', 'package_status', '', 'success', 'Y', '0', 'admin', '2019-05-17 09:41:24', 'admin', '2019-05-17 14:38:08', '');
INSERT INTO `sys_dict_data` VALUES ('43', '3', '检出', '3', 'package_status', null, 'warning', 'Y', '0', 'admin', '2019-05-17 09:42:04', '', null, null);
INSERT INTO `sys_dict_data` VALUES ('44', '4', '已下线', '4', 'package_status', '', '', 'Y', '0', 'admin', '2019-05-17 09:42:28', 'admin', '2019-05-17 10:03:48', '');
INSERT INTO `sys_dict_data` VALUES ('45', '1', '日', 'D', 'job_cycle', '', '', 'Y', '0', 'admin', '2019-05-21 12:51:35', 'admin', '2019-05-21 13:01:03', '');
INSERT INTO `sys_dict_data` VALUES ('46', '2', '月', 'M', 'job_cycle', '', '', 'Y', '0', 'admin', '2019-05-21 12:51:51', 'admin', '2019-05-21 13:01:07', '');
INSERT INTO `sys_dict_data` VALUES ('47', '3', '时', 'H', 'job_cycle', '', '', 'Y', '0', 'admin', '2019-05-21 12:52:12', 'admin', '2019-05-21 13:01:12', '');
INSERT INTO `sys_dict_data` VALUES ('48', '1', '作业触发', '1', 'dispatch_type', null, null, 'Y', '0', 'admin', '2019-05-21 14:37:54', '', null, null);
INSERT INTO `sys_dict_data` VALUES ('49', '2', '定时器', '2', 'dispatch_type', null, null, 'Y', '0', 'admin', '2019-05-21 14:38:18', '', null, null);
INSERT INTO `sys_dict_data` VALUES ('50', '3', '数据源', '3', 'dispatch_type', null, null, 'Y', '0', 'admin', '2019-05-21 14:38:47', '', null, null);
INSERT INTO `sys_dict_data` VALUES ('51', '4', '手工', '4', 'dispatch_type', null, null, 'Y', '0', 'admin', '2019-05-21 14:38:59', '', null, null);
INSERT INTO `sys_dict_data` VALUES ('52', '5', '时间触发', '5', 'dispatch_type', null, null, 'Y', '0', 'admin', '2019-05-21 14:39:29', '', null, null);
INSERT INTO `sys_dict_data` VALUES ('53', '1', '未运行', '0', 'job_run_status', null, null, 'Y', '0', 'admin', '2019-05-22 09:42:08', '', null, null);
INSERT INTO `sys_dict_data` VALUES ('54', '2', '运行中', '1', 'job_run_status', null, null, 'Y', '0', 'admin', '2019-05-22 09:44:22', '', null, null);
INSERT INTO `sys_dict_data` VALUES ('55', '3', '成功', '3', 'job_run_status', null, null, 'Y', '0', 'admin', '2019-05-22 09:44:34', '', null, null);
INSERT INTO `sys_dict_data` VALUES ('56', '4', '失败', '4', 'job_run_status', null, null, 'Y', '0', 'admin', '2019-05-22 09:44:50', '', null, null);
INSERT INTO `sys_dict_data` VALUES ('57', '5', '挂起', '5', 'job_run_status', null, null, 'Y', '0', 'admin', '2019-05-22 09:45:01', '', null, null);
INSERT INTO `sys_dict_data` VALUES ('58', '1', '不可用', '0', 'job_is_enable', null, null, 'Y', '0', 'admin', '2019-05-22 11:31:51', '', null, null);
INSERT INTO `sys_dict_data` VALUES ('59', '2', '可用', '1', 'job_is_enable', null, null, 'Y', '0', 'admin', '2019-05-22 11:32:01', '', null, null);

-- ----------------------------
-- Table structure for sys_dict_type
-- ----------------------------
DROP TABLE IF EXISTS `sys_dict_type`;
CREATE TABLE `sys_dict_type` (
  `dict_id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '字典主键',
  `dict_name` varchar(100) DEFAULT '' COMMENT '字典名称',
  `dict_type` varchar(100) DEFAULT '' COMMENT '字典类型',
  `status` char(1) DEFAULT '0' COMMENT '状态（0正常 1停用）',
  `create_by` varchar(64) DEFAULT '' COMMENT '创建者',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  `update_by` varchar(64) DEFAULT '' COMMENT '更新者',
  `update_time` datetime DEFAULT NULL COMMENT '更新时间',
  `remark` varchar(500) DEFAULT NULL COMMENT '备注',
  PRIMARY KEY (`dict_id`),
  UNIQUE KEY `dict_type` (`dict_type`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8 COMMENT='字典类型表';

-- ----------------------------
-- Records of sys_dict_type
-- ----------------------------
INSERT INTO `sys_dict_type` VALUES ('1', '用户性别', 'sys_user_sex', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '用户性别列表');
INSERT INTO `sys_dict_type` VALUES ('2', '菜单状态', 'sys_show_hide', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '菜单状态列表');
INSERT INTO `sys_dict_type` VALUES ('3', '系统开关', 'sys_normal_disable', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '系统开关列表');
INSERT INTO `sys_dict_type` VALUES ('4', '任务状态', 'sys_job_status', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '任务状态列表');
INSERT INTO `sys_dict_type` VALUES ('5', '系统是否', 'sys_yes_no', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '系统是否列表');
INSERT INTO `sys_dict_type` VALUES ('6', '通知类型', 'sys_notice_type', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '通知类型列表');
INSERT INTO `sys_dict_type` VALUES ('7', '通知状态', 'sys_notice_status', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '通知状态列表');
INSERT INTO `sys_dict_type` VALUES ('8', '操作类型', 'sys_oper_type', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '操作类型列表');
INSERT INTO `sys_dict_type` VALUES ('9', '系统状态', 'sys_common_status', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '登录状态列表');
INSERT INTO `sys_dict_type` VALUES ('10', 'kerberos是否', 'hadoop_kerberos', '0', 'admin', '2019-04-19 18:07:56', '', null, 'Hadoop平台是否开启kerberos认证');
INSERT INTO `sys_dict_type` VALUES ('11', 'hadoop相关信息状态', 'hadoop_enable', '0', 'admin', '2019-04-20 10:42:34', '', null, 'hadoop相关信息状态');
INSERT INTO `sys_dict_type` VALUES ('12', '是否为代理租户', 'hadoop_proxy', '0', 'admin', '2019-04-20 10:46:51', '', null, 'Hadoop租户是否为代理租户');
INSERT INTO `sys_dict_type` VALUES ('13', '项目工程状态', 'project_status', '0', 'admin', '2019-04-27 00:00:59', '', null, '项目工程各个进度情况描述');
INSERT INTO `sys_dict_type` VALUES ('14', 'Spark运行模式', 'spark_mode', '0', 'admin', '2019-05-09 01:50:03', 'admin', '2019-05-09 01:51:30', 'Spark运行模式');
INSERT INTO `sys_dict_type` VALUES ('15', '任务包类型', 'package_type', '0', 'admin', '2019-05-15 16:56:10', 'admin', '2019-05-17 09:40:28', '任务包类型');
INSERT INTO `sys_dict_type` VALUES ('16', '任务包状态', 'package_status', '0', 'admin', '2019-05-17 09:40:11', 'admin', '2019-05-17 09:40:20', '任务包状态');
INSERT INTO `sys_dict_type` VALUES ('17', '作业周期', 'job_cycle', '0', 'admin', '2019-05-21 12:51:12', '', null, null);
INSERT INTO `sys_dict_type` VALUES ('18', '调度类型', 'dispatch_type', '0', 'admin', '2019-05-21 14:37:11', '', null, null);
INSERT INTO `sys_dict_type` VALUES ('19', '作业运行状态', 'job_run_status', '0', 'admin', '2019-05-22 09:41:21', '', null, null);
INSERT INTO `sys_dict_type` VALUES ('20', '作业可用状态', 'job_is_enable', '0', 'admin', '2019-05-22 11:31:21', '', null, '作业可用状态');

-- ----------------------------
-- Table structure for sys_job
-- ----------------------------
DROP TABLE IF EXISTS `sys_job`;
CREATE TABLE `sys_job` (
  `job_id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '任务ID',
  `job_name` varchar(64) NOT NULL DEFAULT '' COMMENT '任务名称',
  `job_group` varchar(64) NOT NULL DEFAULT '' COMMENT '任务组名',
  `method_name` varchar(500) DEFAULT '' COMMENT '任务方法',
  `method_params` varchar(50) DEFAULT NULL COMMENT '方法参数',
  `cron_expression` varchar(255) DEFAULT '' COMMENT 'cron执行表达式',
  `misfire_policy` varchar(20) DEFAULT '3' COMMENT '计划执行错误策略（1立即执行 2执行一次 3放弃执行）',
  `concurrent` char(1) DEFAULT '1' COMMENT '是否并发执行（0允许 1禁止）',
  `status` char(1) DEFAULT '0' COMMENT '状态（0正常 1暂停）',
  `create_by` varchar(64) DEFAULT '' COMMENT '创建者',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  `update_by` varchar(64) DEFAULT '' COMMENT '更新者',
  `update_time` datetime DEFAULT NULL COMMENT '更新时间',
  `remark` varchar(500) DEFAULT '' COMMENT '备注信息',
  PRIMARY KEY (`job_id`,`job_name`,`job_group`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 COMMENT='定时任务调度表';

-- ----------------------------
-- Records of sys_job
-- ----------------------------
INSERT INTO `sys_job` VALUES ('1', 'ryTask', '系统默认（无参）', 'ryNoParams', '', '0/10 * * * * ?', '3', '1', '1', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-06-05 15:55:19', '');
INSERT INTO `sys_job` VALUES ('2', 'ryTask', '系统默认（有参）', 'ryParams', 'atomic', '0/20 * * * * ?', '3', '1', '1', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-05-29 10:28:45', '');
INSERT INTO `sys_job` VALUES ('3', 'atomicTask', '测试demo', 'doWorkDemo1', 'aa', '0/10 * * * * ?', '1', '1', '1', '', '2019-05-29 11:00:05', '', '2019-06-05 16:36:23', '');

-- ----------------------------
-- Table structure for sys_job_log
-- ----------------------------
DROP TABLE IF EXISTS `sys_job_log`;
CREATE TABLE `sys_job_log` (
  `job_log_id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '任务日志ID',
  `job_name` varchar(64) NOT NULL COMMENT '任务名称',
  `job_group` varchar(64) NOT NULL COMMENT '任务组名',
  `method_name` varchar(500) DEFAULT NULL COMMENT '任务方法',
  `method_params` varchar(50) DEFAULT NULL COMMENT '方法参数',
  `job_message` varchar(500) DEFAULT NULL COMMENT '日志信息',
  `status` char(1) DEFAULT '0' COMMENT '执行状态（0正常 1失败）',
  `exception_info` varchar(2000) DEFAULT '' COMMENT '异常信息',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  PRIMARY KEY (`job_log_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='定时任务调度日志表';

-- ----------------------------
-- Records of sys_job_log
-- ----------------------------

-- ----------------------------
-- Table structure for sys_logininfor
-- ----------------------------
DROP TABLE IF EXISTS `sys_logininfor`;
CREATE TABLE `sys_logininfor` (
  `info_id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '访问ID',
  `login_name` varchar(50) DEFAULT '' COMMENT '登录账号',
  `ipaddr` varchar(50) DEFAULT '' COMMENT '登录IP地址',
  `login_location` varchar(255) DEFAULT '' COMMENT '登录地点',
  `browser` varchar(50) DEFAULT '' COMMENT '浏览器类型',
  `os` varchar(50) DEFAULT '' COMMENT '操作系统',
  `status` char(1) DEFAULT '0' COMMENT '登录状态（0成功 1失败）',
  `msg` varchar(255) DEFAULT '' COMMENT '提示消息',
  `login_time` datetime DEFAULT NULL COMMENT '访问时间',
  PRIMARY KEY (`info_id`)
) ENGINE=InnoDB AUTO_INCREMENT=29 DEFAULT CHARSET=utf8 COMMENT='系统访问记录';

-- ----------------------------
-- Records of sys_logininfor
-- ----------------------------

-- ----------------------------
-- Table structure for sys_menu
-- ----------------------------
DROP TABLE IF EXISTS `sys_menu`;
CREATE TABLE `sys_menu` (
  `menu_id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '菜单ID',
  `menu_name` varchar(50) NOT NULL COMMENT '菜单名称',
  `parent_id` bigint(20) DEFAULT '0' COMMENT '父菜单ID',
  `order_num` int(4) DEFAULT '0' COMMENT '显示顺序',
  `url` varchar(200) DEFAULT '#' COMMENT '请求地址',
  `menu_type` char(1) DEFAULT '' COMMENT '菜单类型（M目录 C菜单 F按钮）',
  `visible` char(1) DEFAULT '0' COMMENT '菜单状态（0显示 1隐藏）',
  `perms` varchar(100) DEFAULT NULL COMMENT '权限标识',
  `icon` varchar(100) DEFAULT '#' COMMENT '菜单图标',
  `create_by` varchar(64) DEFAULT '' COMMENT '创建者',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  `update_by` varchar(64) DEFAULT '' COMMENT '更新者',
  `update_time` datetime DEFAULT NULL COMMENT '更新时间',
  `remark` varchar(500) DEFAULT '' COMMENT '备注',
  PRIMARY KEY (`menu_id`)
) ENGINE=InnoDB AUTO_INCREMENT=10044 DEFAULT CHARSET=utf8 COMMENT='菜单权限表';

-- ----------------------------
-- Records of sys_menu
-- ----------------------------
INSERT INTO `sys_menu` VALUES ('1', '系统管理', '9999', '1', '#', 'M', '0', '', 'fa fa-gear', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '系统管理目录');
INSERT INTO `sys_menu` VALUES ('2', '系统监控', '9999', '2', '#', 'M', '0', '', 'fa fa-video-camera', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '系统监控目录');
INSERT INTO `sys_menu` VALUES ('3', '系统工具', '9999', '3', '#', 'M', '0', '', 'fa fa-bars', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '系统工具目录');
INSERT INTO `sys_menu` VALUES ('100', '用户管理', '1', '1', '/system/user', 'C', '0', 'system:user:view', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '用户管理菜单');
INSERT INTO `sys_menu` VALUES ('101', '角色管理', '1', '2', '/system/role', 'C', '0', 'system:role:view', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '角色管理菜单');
INSERT INTO `sys_menu` VALUES ('102', '菜单管理', '1', '3', '/system/menu', 'C', '0', 'system:menu:view', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '菜单管理菜单');
INSERT INTO `sys_menu` VALUES ('103', '组织管理', '1', '4', '/system/dept', 'C', '0', 'system:dept:view', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '部门管理菜单');
INSERT INTO `sys_menu` VALUES ('104', '岗位管理', '1', '5', '/system/post', 'C', '0', 'system:post:view', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '岗位管理菜单');
INSERT INTO `sys_menu` VALUES ('105', '字典管理', '1', '6', '/system/dict', 'C', '0', 'system:dict:view', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '字典管理菜单');
INSERT INTO `sys_menu` VALUES ('106', '参数设置', '1', '7', '/system/config', 'C', '0', 'system:config:view', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '参数设置菜单');
INSERT INTO `sys_menu` VALUES ('107', '通知公告', '1', '8', '/system/notice', 'C', '0', 'system:notice:view', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '通知公告菜单');
INSERT INTO `sys_menu` VALUES ('108', '日志管理', '1', '9', '#', 'M', '0', '', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '日志管理菜单');
INSERT INTO `sys_menu` VALUES ('109', '在线用户', '2', '1', '/monitor/online', 'C', '0', 'monitor:online:view', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '在线用户菜单');
INSERT INTO `sys_menu` VALUES ('110', '定时任务', '2', '2', '/monitor/job', 'C', '0', 'monitor:job:view', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '定时任务菜单');
INSERT INTO `sys_menu` VALUES ('111', '数据监控', '2', '3', '/monitor/data', 'C', '0', 'monitor:data:view', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '数据监控菜单');
INSERT INTO `sys_menu` VALUES ('112', '服务监控', '2', '3', '/monitor/server', 'C', '0', 'monitor:server:view', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '服务监控菜单');
INSERT INTO `sys_menu` VALUES ('113', '表单构建', '3', '1', '/tool/build', 'C', '0', 'tool:build:view', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '表单构建菜单');
INSERT INTO `sys_menu` VALUES ('114', '代码生成', '3', '2', '/tool/gen', 'C', '0', 'tool:gen:view', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '代码生成菜单');
INSERT INTO `sys_menu` VALUES ('115', '系统接口', '3', '3', '/tool/swagger', 'C', '0', 'tool:swagger:view', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '系统接口菜单');
INSERT INTO `sys_menu` VALUES ('500', '操作日志', '108', '1', '/monitor/operlog', 'C', '0', 'monitor:operlog:view', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '操作日志菜单');
INSERT INTO `sys_menu` VALUES ('501', '登录日志', '108', '2', '/monitor/logininfor', 'C', '0', 'monitor:logininfor:view', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '登录日志菜单');
INSERT INTO `sys_menu` VALUES ('1000', '用户查询', '100', '1', '#', 'F', '0', 'system:user:list', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1001', '用户新增', '100', '2', '#', 'F', '0', 'system:user:add', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1002', '用户修改', '100', '3', '#', 'F', '0', 'system:user:edit', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1003', '用户删除', '100', '4', '#', 'F', '0', 'system:user:remove', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1004', '用户导出', '100', '5', '#', 'F', '0', 'system:user:export', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1005', '用户导入', '100', '6', '#', 'F', '0', 'system:user:import', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1006', '重置密码', '100', '7', '#', 'F', '0', 'system:user:resetPwd', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1007', '角色查询', '101', '1', '#', 'F', '0', 'system:role:list', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1008', '角色新增', '101', '2', '#', 'F', '0', 'system:role:add', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1009', '角色修改', '101', '3', '#', 'F', '0', 'system:role:edit', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1010', '角色删除', '101', '4', '#', 'F', '0', 'system:role:remove', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1011', '角色导出', '101', '5', '#', 'F', '0', 'system:role:export', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1012', '菜单查询', '102', '1', '#', 'F', '0', 'system:menu:list', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1013', '菜单新增', '102', '2', '#', 'F', '0', 'system:menu:add', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1014', '菜单修改', '102', '3', '#', 'F', '0', 'system:menu:edit', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1015', '菜单删除', '102', '4', '#', 'F', '0', 'system:menu:remove', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1016', '组织查询', '103', '1', '#', 'F', '0', 'system:dept:list', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1017', '组织新增', '103', '2', '#', 'F', '0', 'system:dept:add', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1018', '组织修改', '103', '3', '#', 'F', '0', 'system:dept:edit', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1019', '组织删除', '103', '4', '#', 'F', '0', 'system:dept:remove', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1020', '岗位查询', '104', '1', '#', 'F', '0', 'system:post:list', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1021', '岗位新增', '104', '2', '#', 'F', '0', 'system:post:add', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1022', '岗位修改', '104', '3', '#', 'F', '0', 'system:post:edit', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1023', '岗位删除', '104', '4', '#', 'F', '0', 'system:post:remove', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1024', '岗位导出', '104', '5', '#', 'F', '0', 'system:post:export', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1025', '字典查询', '105', '1', '#', 'F', '0', 'system:dict:list', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1026', '字典新增', '105', '2', '#', 'F', '0', 'system:dict:add', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1027', '字典修改', '105', '3', '#', 'F', '0', 'system:dict:edit', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1028', '字典删除', '105', '4', '#', 'F', '0', 'system:dict:remove', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1029', '字典导出', '105', '5', '#', 'F', '0', 'system:dict:export', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1030', '参数查询', '106', '1', '#', 'F', '0', 'system:config:list', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1031', '参数新增', '106', '2', '#', 'F', '0', 'system:config:add', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1032', '参数修改', '106', '3', '#', 'F', '0', 'system:config:edit', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1033', '参数删除', '106', '4', '#', 'F', '0', 'system:config:remove', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1034', '参数导出', '106', '5', '#', 'F', '0', 'system:config:export', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1035', '公告查询', '107', '1', '#', 'F', '0', 'system:notice:list', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1036', '公告新增', '107', '2', '#', 'F', '0', 'system:notice:add', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1037', '公告修改', '107', '3', '#', 'F', '0', 'system:notice:edit', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1038', '公告删除', '107', '4', '#', 'F', '0', 'system:notice:remove', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1039', '操作查询', '500', '1', '#', 'F', '0', 'monitor:operlog:list', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1040', '操作删除', '500', '2', '#', 'F', '0', 'monitor:operlog:remove', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1041', '详细信息', '500', '3', '#', 'F', '0', 'monitor:operlog:detail', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1042', '日志导出', '500', '4', '#', 'F', '0', 'monitor:operlog:export', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1043', '登录查询', '501', '1', '#', 'F', '0', 'monitor:logininfor:list', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1044', '登录删除', '501', '2', '#', 'F', '0', 'monitor:logininfor:remove', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1045', '日志导出', '501', '3', '#', 'F', '0', 'monitor:logininfor:export', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1046', '在线查询', '109', '1', '#', 'F', '0', 'monitor:online:list', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1047', '批量强退', '109', '2', '#', 'F', '0', 'monitor:online:batchForceLogout', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1048', '单条强退', '109', '3', '#', 'F', '0', 'monitor:online:forceLogout', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1049', '任务查询', '110', '1', '#', 'F', '0', 'monitor:job:list', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1050', '任务新增', '110', '2', '#', 'F', '0', 'monitor:job:add', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1051', '任务修改', '110', '3', '#', 'F', '0', 'monitor:job:edit', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1052', '任务删除', '110', '4', '#', 'F', '0', 'monitor:job:remove', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1053', '状态修改', '110', '5', '#', 'F', '0', 'monitor:job:changeStatus', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1054', '任务详细', '110', '6', '#', 'F', '0', 'monitor:job:detail', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1055', '任务导出', '110', '7', '#', 'F', '0', 'monitor:job:export', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1056', '生成查询', '114', '1', '#', 'F', '0', 'tool:gen:list', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1057', '生成代码', '114', '2', '#', 'F', '0', 'tool:gen:code', '#', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_menu` VALUES ('1059', '租户中心', '0', '2', '#', 'S', '0', '', 'fa fa-group', 'admin', '2019-04-14 20:02:14', 'admin', '2019-04-26 23:25:35', '');
INSERT INTO `sys_menu` VALUES ('9999', '系统设置', '0', '1', '#', 'S', '0', null, 'fa fa-cog', 'admin', '2019-04-14 14:05:57', '', null, '');
INSERT INTO `sys_menu` VALUES ('10000', '集群注册', '10005', '1', 'hadoop/hadoopPlatform', 'C', '0', 'hadoop:hadoopPlatform:view', '#', 'admin', '2019-04-13 00:00:00', 'admin', '2019-04-26 23:26:29', 'Hadoop平台模型菜单');
INSERT INTO `sys_menu` VALUES ('10001', 'Hadoop平台模型查询', '10000', '1', '#', 'F', '0', 'hadoop:hadoopPlatform:list', '#', 'admin', '2019-04-13 00:00:00', 'atomic', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10002', 'Hadoop平台模型新增', '10000', '2', '#', 'F', '0', 'hadoop:hadoopPlatform:add', '#', 'admin', '2019-04-13 00:00:00', 'atomic', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10003', 'Hadoop平台模型修改', '10000', '3', '#', 'F', '0', 'hadoop:hadoopPlatform:edit', '#', 'admin', '2019-04-13 00:00:00', 'atomic', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10004', 'Hadoop平台模型删除', '10000', '4', '#', 'F', '0', 'hadoop:hadoopPlatform:remove', '#', 'admin', '2019-04-13 00:00:00', 'atomic', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10005', 'Hadoop集群', '1059', '1', '#', 'M', '0', '', 'fa fa-cubes', 'admin', '2019-04-19 17:53:44', 'admin', '2019-04-26 23:26:44', '');
INSERT INTO `sys_menu` VALUES ('10006', '租户管理', '10005', '2', 'hadoop/hadoopTenant', 'C', '0', 'hadoop:hadoopTenant:view', '#', 'admin', '2019-04-13 00:00:00', 'admin', '2019-04-20 13:10:10', 'Hadoop平台租户模型菜单');
INSERT INTO `sys_menu` VALUES ('10007', 'Hadoop平台租户模型查询', '10006', '1', '#', 'F', '0', 'hadoop:hadoopTenant:list', '#', 'admin', '2019-04-13 00:00:00', 'admin', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10008', 'Hadoop平台租户模型新增', '10006', '2', '#', 'F', '0', 'hadoop:hadoopTenant:add', '#', 'admin', '2019-04-13 00:00:00', 'admin', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10009', 'Hadoop平台租户模型修改', '10006', '3', '#', 'F', '0', 'hadoop:hadoopTenant:edit', '#', 'admin', '2019-04-13 00:00:00', 'admin', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10010', 'Hadoop平台租户模型删除', '10006', '4', '#', 'F', '0', 'hadoop:hadoopTenant:remove', '#', 'admin', '2019-04-13 00:00:00', 'admin', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10011', '项目管理', '1059', '2', 'hadoop/hadoopProject', 'C', '0', 'hadoop:hadoopProject:view', 'fa fa-product-hunt', 'admin', '2019-04-26 23:27:34', '', null, '');
INSERT INTO `sys_menu` VALUES ('10012', '项目查询', '10011', '1', '#', 'F', '0', 'hadoop:hadoopProject:list', '#', 'admin', '2019-04-13 00:00:00', 'admin', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10013', '项目新增', '10011', '2', '#', 'F', '0', 'hadoop:hadoopProject:add', '#', 'admin', '2019-04-13 00:00:00', 'admin', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10014', '项目修改', '10011', '3', '#', 'F', '0', 'hadoop:hadoopProject:edit', '#', 'admin', '2019-04-13 00:00:00', 'admin', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10015', '项目删除', '10011', '4', '#', 'F', '0', 'hadoop:hadoopProject:remove', '#', 'admin', '2019-04-13 00:00:00', 'admin', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10016', '项目导出', '10011', '4', '#', 'F', '0', 'hadoop:hadoopProject:export', '#', 'admin', '2019-04-13 00:00:00', 'admin', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10017', 'Hadoop平台模型导出', '10006', '4', '#', 'F', '0', 'hadoop:hadoopPlatform:export', '#', 'admin', '2019-04-13 00:00:00', 'admin', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10018', 'Hadoop平台租户模型导出', '10000', '4', '#', 'F', '0', 'hadoop:hadoopTenant:export', '#', 'admin', '2019-04-13 00:00:00', 'admin', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10019', '在线开发', '0', '3', 'ooize/devnav/index', 'S', '0', null, 'fa fa-calculator', 'admin', '2019-05-11 10:37:30', '', null, '');
INSERT INTO `sys_menu` VALUES ('10020', '任务包', '10019', '1', 'oozie/ooziePackageTemplate', 'C', '0', 'oozie:ooziePackageTemplate:view', 'fa fa-folder', 'admin', '2019-05-13 23:58:39', '', null, '');
INSERT INTO `sys_menu` VALUES ('10021', '任务包查询', '10020', '1', '#', 'F', '0', 'oozie:ooziePackageTemplate:list', '#', 'admin', '2019-05-13 23:59:49', '', null, '');
INSERT INTO `sys_menu` VALUES ('10023', '任务包新增', '10020', '2', '#', 'F', '0', 'oozie:ooziePackageTemplate:add', '#', 'admin', '2019-05-14 00:01:21', '', null, '');
INSERT INTO `sys_menu` VALUES ('10024', '任务包修改', '10020', '3', '#', 'F', '0', 'oozie:ooziePackageTemplate:edit', '#', 'admin', '2019-05-14 00:01:50', '', null, '');
INSERT INTO `sys_menu` VALUES ('10025', '任务包删除', '10020', '4', '#', 'F', '0', 'oozie:ooziePackageTemplate:remove', '#', 'admin', '2019-05-14 00:02:14', '', null, '');
INSERT INTO `sys_menu` VALUES ('10026', '作业维护', '0', '4', 'ooize/opernav/index', 'S', '0', null, 'fa fa-dashboard', 'admin', '2019-05-19 11:51:20', '', null, '');
INSERT INTO `sys_menu` VALUES ('10027', '子系统', '10029', '1', 'oozie/oozieSubsystem', 'C', '0', 'oozie:oozieSubsystem:view', '#', 'admin', '2019-05-19 12:52:47', 'admin', '2019-05-19 12:55:52', '');
INSERT INTO `sys_menu` VALUES ('10029', '基础配置', '10026', '1', '#', 'M', '0', null, 'fa fa-gear', 'admin', '2019-05-19 12:55:38', '', null, '');
INSERT INTO `sys_menu` VALUES ('10030', '子系统查询', '10027', '1', '#', 'F', '0', 'oozie:oozieSubsystem:list', '#', 'admin', '2019-04-13 00:00:00', 'atomic', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10031', '子系统新增', '10027', '2', '#', 'F', '0', 'oozie:oozieSubsystem:add', '#', 'admin', '2019-04-13 00:00:00', 'atomic', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10032', '子系统修改', '10027', '3', '#', 'F', '0', 'oozie:oozieSubsystem:edit', '#', 'admin', '2019-04-13 00:00:00', 'atomic', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10033', '子系统删除', '10027', '4', '#', 'F', '0', 'oozie:oozieSubsystem:remove', '#', 'admin', '2019-04-13 00:00:00', 'atomic', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10034', '作业', '10026', '2', 'oozie/oozieJob', 'C', '0', 'oozie:oozieJob:view', 'fa fa-tasks', 'admin', '2019-05-21 18:13:26', '', null, '');
INSERT INTO `sys_menu` VALUES ('10035', '作业查询', '10034', '1', '#', 'F', '0', 'oozie:oozieJob:list', '#', 'admin', '2019-04-13 00:00:00', 'atomic', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10036', '作业新增', '10034', '2', '#', 'F', '0', 'oozie:oozieJob:add', '#', 'admin', '2019-04-13 00:00:00', 'atomic', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10037', '作业修改', '10034', '3', '#', 'F', '0', 'oozie:oozieJob:edit', '#', 'admin', '2019-04-13 00:00:00', 'atomic', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10038', '作业删除', '10034', '4', '#', 'F', '0', 'oozie:oozieJob:remove', '#', 'admin', '2019-04-13 00:00:00', 'atomic', '2019-04-13 00:00:00', '');
INSERT INTO `sys_menu` VALUES ('10039', '策略通道', '10029', '2', 'oozie/oozieStrategy', 'C', '0', 'oozie:oozieStrategy:view', '#', 'admin', '2019-04-13 00:00:00', 'atomic', '2019-04-13 00:00:00', '策略通道');
INSERT INTO `sys_menu` VALUES ('10040', '策略通道查询', '10039', '1', '#', 'F', '0', 'oozie:oozieStrategy:list', '#', 'admin', '2019-06-06 14:41:14', '', null, '');
INSERT INTO `sys_menu` VALUES ('10041', '策略通道新增', '10039', '2', '#', 'F', '0', 'oozie:oozieStrategy:add', '#', 'admin', '2019-06-06 14:41:45', '', null, '');
INSERT INTO `sys_menu` VALUES ('10042', '策略通道修改', '10039', '3', '#', 'F', '0', 'oozie:oozieStrategy:edit', '#', 'admin', '2019-06-06 14:42:10', '', null, '');
INSERT INTO `sys_menu` VALUES ('10043', '策略通道删除', '10039', '4', '#', 'F', '0', 'oozie:oozieStrategy:remove', '#', 'admin', '2019-06-06 14:42:38', '', null, '');

-- ----------------------------
-- Table structure for sys_notice
-- ----------------------------
DROP TABLE IF EXISTS `sys_notice`;
CREATE TABLE `sys_notice` (
  `notice_id` int(4) NOT NULL AUTO_INCREMENT COMMENT '公告ID',
  `notice_title` varchar(50) NOT NULL COMMENT '公告标题',
  `notice_type` char(1) NOT NULL COMMENT '公告类型（1通知 2公告）',
  `notice_content` varchar(2000) DEFAULT NULL COMMENT '公告内容',
  `status` char(1) DEFAULT '0' COMMENT '公告状态（0正常 1关闭）',
  `create_by` varchar(64) DEFAULT '' COMMENT '创建者',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  `update_by` varchar(64) DEFAULT '' COMMENT '更新者',
  `update_time` datetime DEFAULT NULL COMMENT '更新时间',
  `remark` varchar(255) DEFAULT NULL COMMENT '备注',
  PRIMARY KEY (`notice_id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COMMENT='通知公告表';

-- ----------------------------
-- Records of sys_notice
-- ----------------------------
INSERT INTO `sys_notice` VALUES ('1', '温馨提醒：2019-04-13 Atomic新版本发布啦', '2', '新版本内容', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '管理员');
INSERT INTO `sys_notice` VALUES ('2', '维护通知：2019-04-13 Atomic系统凌晨维护', '1', '维护内容', '0', 'admin', '2019-04-13 11:33:00', 'admin', '2019-04-25 21:20:51', '管理员');

-- ----------------------------
-- Table structure for sys_oper_log
-- ----------------------------
DROP TABLE IF EXISTS `sys_oper_log`;
CREATE TABLE `sys_oper_log` (
  `oper_id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '日志主键',
  `title` varchar(50) DEFAULT '' COMMENT '模块标题',
  `business_type` int(2) DEFAULT '0' COMMENT '业务类型（0其它 1新增 2修改 3删除）',
  `method` varchar(100) DEFAULT '' COMMENT '方法名称',
  `operator_type` int(1) DEFAULT '0' COMMENT '操作类别（0其它 1后台用户 2手机端用户）',
  `oper_name` varchar(50) DEFAULT '' COMMENT '操作人员',
  `dept_name` varchar(50) DEFAULT '' COMMENT '部门名称',
  `oper_url` varchar(255) DEFAULT '' COMMENT '请求URL',
  `oper_ip` varchar(50) DEFAULT '' COMMENT '主机地址',
  `oper_location` varchar(255) DEFAULT '' COMMENT '操作地点',
  `oper_param` varchar(2000) DEFAULT '' COMMENT '请求参数',
  `status` int(1) DEFAULT '0' COMMENT '操作状态（0正常 1异常）',
  `error_msg` varchar(2000) DEFAULT '' COMMENT '错误消息',
  `oper_time` datetime DEFAULT NULL COMMENT '操作时间',
  PRIMARY KEY (`oper_id`)
) ENGINE=InnoDB AUTO_INCREMENT=17 DEFAULT CHARSET=utf8 COMMENT='操作日志记录';

-- ----------------------------
-- Records of sys_oper_log
-- ----------------------------

-- ----------------------------
-- Table structure for sys_post
-- ----------------------------
DROP TABLE IF EXISTS `sys_post`;
CREATE TABLE `sys_post` (
  `post_id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '岗位ID',
  `post_code` varchar(64) NOT NULL COMMENT '岗位编码',
  `post_name` varchar(50) NOT NULL COMMENT '岗位名称',
  `post_sort` int(4) NOT NULL COMMENT '显示顺序',
  `status` char(1) NOT NULL COMMENT '状态（0正常 1停用）',
  `create_by` varchar(64) DEFAULT '' COMMENT '创建者',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  `update_by` varchar(64) DEFAULT '' COMMENT '更新者',
  `update_time` datetime DEFAULT NULL COMMENT '更新时间',
  `remark` varchar(500) DEFAULT NULL COMMENT '备注',
  PRIMARY KEY (`post_id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8 COMMENT='岗位信息表';

-- ----------------------------
-- Records of sys_post
-- ----------------------------
INSERT INTO `sys_post` VALUES ('1', 'ceo', '董事长', '1', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_post` VALUES ('2', 'apm', '局方项目经理', '2', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_post` VALUES ('3', 'bpm', '厂商项目经理', '3', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');
INSERT INTO `sys_post` VALUES ('4', 'staff', '普通员工', '4', '0', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-04-13 11:33:00', '');

-- ----------------------------
-- Table structure for sys_role
-- ----------------------------
DROP TABLE IF EXISTS `sys_role`;
CREATE TABLE `sys_role` (
  `role_id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '角色ID',
  `role_name` varchar(30) NOT NULL COMMENT '角色名称',
  `role_key` varchar(100) NOT NULL COMMENT '角色权限字符串',
  `role_sort` int(4) NOT NULL COMMENT '显示顺序',
  `data_scope` char(1) DEFAULT '1' COMMENT '数据范围（1：全部数据权限 2：自定数据权限）',
  `status` char(1) NOT NULL COMMENT '角色状态（0正常 1停用）',
  `del_flag` char(1) DEFAULT '0' COMMENT '删除标志（0代表存在 2代表删除）',
  `create_by` varchar(64) DEFAULT '' COMMENT '创建者',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  `update_by` varchar(64) DEFAULT '' COMMENT '更新者',
  `update_time` datetime DEFAULT NULL COMMENT '更新时间',
  `remark` varchar(500) DEFAULT NULL COMMENT '备注',
  PRIMARY KEY (`role_id`)
) ENGINE=InnoDB AUTO_INCREMENT=103 DEFAULT CHARSET=utf8 COMMENT='角色信息表';

-- ----------------------------
-- Records of sys_role
-- ----------------------------
INSERT INTO `sys_role` VALUES ('1', '管理员', 'admin', '1', '1', '0', '0', 'admin', '2019-04-13 11:33:00', 'admin', '2019-06-06 14:43:03', '管理员');
INSERT INTO `sys_role` VALUES ('2', '普通角色', 'common', '3', '2', '0', '2', 'admin', '2019-04-13 11:33:00', 'admin', '2019-04-27 10:09:41', '普通角色');
INSERT INTO `sys_role` VALUES ('100', '开发人员', 'dev', '4', '2', '0', '0', 'admin', '2019-04-13 23:50:29', 'admin', '2019-06-06 14:43:29', '开发人员');
INSERT INTO `sys_role` VALUES ('101', '项目管理员', 'projecter', '2', '1', '0', '0', 'admin', '2019-04-27 10:09:06', 'admin', '2019-06-06 14:43:13', '');
INSERT INTO `sys_role` VALUES ('102', '运维人员', 'ops', '5', '1', '0', '0', 'admin', '2019-04-27 10:15:01', 'admin', '2019-04-28 14:31:28', '');

-- ----------------------------
-- Table structure for sys_role_dept
-- ----------------------------
DROP TABLE IF EXISTS `sys_role_dept`;
CREATE TABLE `sys_role_dept` (
  `role_id` bigint(20) NOT NULL COMMENT '角色ID',
  `dept_id` bigint(20) NOT NULL COMMENT '部门ID',
  PRIMARY KEY (`role_id`,`dept_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='角色和部门关联表';

-- ----------------------------
-- Records of sys_role_dept
-- ----------------------------
INSERT INTO `sys_role_dept` VALUES ('2', '100');
INSERT INTO `sys_role_dept` VALUES ('2', '101');
INSERT INTO `sys_role_dept` VALUES ('2', '105');
INSERT INTO `sys_role_dept` VALUES ('100', '102');
INSERT INTO `sys_role_dept` VALUES ('100', '110');

-- ----------------------------
-- Table structure for sys_role_menu
-- ----------------------------
DROP TABLE IF EXISTS `sys_role_menu`;
CREATE TABLE `sys_role_menu` (
  `role_id` bigint(20) NOT NULL COMMENT '角色ID',
  `menu_id` bigint(20) NOT NULL COMMENT '菜单ID',
  PRIMARY KEY (`role_id`,`menu_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='角色和菜单关联表';

-- ----------------------------
-- Records of sys_role_menu
-- ----------------------------
INSERT INTO `sys_role_menu` VALUES ('1', '1');
INSERT INTO `sys_role_menu` VALUES ('1', '2');
INSERT INTO `sys_role_menu` VALUES ('1', '3');
INSERT INTO `sys_role_menu` VALUES ('1', '100');
INSERT INTO `sys_role_menu` VALUES ('1', '101');
INSERT INTO `sys_role_menu` VALUES ('1', '102');
INSERT INTO `sys_role_menu` VALUES ('1', '103');
INSERT INTO `sys_role_menu` VALUES ('1', '104');
INSERT INTO `sys_role_menu` VALUES ('1', '105');
INSERT INTO `sys_role_menu` VALUES ('1', '106');
INSERT INTO `sys_role_menu` VALUES ('1', '107');
INSERT INTO `sys_role_menu` VALUES ('1', '108');
INSERT INTO `sys_role_menu` VALUES ('1', '109');
INSERT INTO `sys_role_menu` VALUES ('1', '110');
INSERT INTO `sys_role_menu` VALUES ('1', '111');
INSERT INTO `sys_role_menu` VALUES ('1', '112');
INSERT INTO `sys_role_menu` VALUES ('1', '113');
INSERT INTO `sys_role_menu` VALUES ('1', '114');
INSERT INTO `sys_role_menu` VALUES ('1', '115');
INSERT INTO `sys_role_menu` VALUES ('1', '500');
INSERT INTO `sys_role_menu` VALUES ('1', '501');
INSERT INTO `sys_role_menu` VALUES ('1', '1000');
INSERT INTO `sys_role_menu` VALUES ('1', '1001');
INSERT INTO `sys_role_menu` VALUES ('1', '1002');
INSERT INTO `sys_role_menu` VALUES ('1', '1003');
INSERT INTO `sys_role_menu` VALUES ('1', '1004');
INSERT INTO `sys_role_menu` VALUES ('1', '1005');
INSERT INTO `sys_role_menu` VALUES ('1', '1006');
INSERT INTO `sys_role_menu` VALUES ('1', '1007');
INSERT INTO `sys_role_menu` VALUES ('1', '1008');
INSERT INTO `sys_role_menu` VALUES ('1', '1009');
INSERT INTO `sys_role_menu` VALUES ('1', '1010');
INSERT INTO `sys_role_menu` VALUES ('1', '1011');
INSERT INTO `sys_role_menu` VALUES ('1', '1012');
INSERT INTO `sys_role_menu` VALUES ('1', '1013');
INSERT INTO `sys_role_menu` VALUES ('1', '1014');
INSERT INTO `sys_role_menu` VALUES ('1', '1015');
INSERT INTO `sys_role_menu` VALUES ('1', '1016');
INSERT INTO `sys_role_menu` VALUES ('1', '1017');
INSERT INTO `sys_role_menu` VALUES ('1', '1018');
INSERT INTO `sys_role_menu` VALUES ('1', '1019');
INSERT INTO `sys_role_menu` VALUES ('1', '1020');
INSERT INTO `sys_role_menu` VALUES ('1', '1021');
INSERT INTO `sys_role_menu` VALUES ('1', '1022');
INSERT INTO `sys_role_menu` VALUES ('1', '1023');
INSERT INTO `sys_role_menu` VALUES ('1', '1024');
INSERT INTO `sys_role_menu` VALUES ('1', '1025');
INSERT INTO `sys_role_menu` VALUES ('1', '1026');
INSERT INTO `sys_role_menu` VALUES ('1', '1027');
INSERT INTO `sys_role_menu` VALUES ('1', '1028');
INSERT INTO `sys_role_menu` VALUES ('1', '1029');
INSERT INTO `sys_role_menu` VALUES ('1', '1030');
INSERT INTO `sys_role_menu` VALUES ('1', '1031');
INSERT INTO `sys_role_menu` VALUES ('1', '1032');
INSERT INTO `sys_role_menu` VALUES ('1', '1033');
INSERT INTO `sys_role_menu` VALUES ('1', '1034');
INSERT INTO `sys_role_menu` VALUES ('1', '1035');
INSERT INTO `sys_role_menu` VALUES ('1', '1036');
INSERT INTO `sys_role_menu` VALUES ('1', '1037');
INSERT INTO `sys_role_menu` VALUES ('1', '1038');
INSERT INTO `sys_role_menu` VALUES ('1', '1039');
INSERT INTO `sys_role_menu` VALUES ('1', '1040');
INSERT INTO `sys_role_menu` VALUES ('1', '1041');
INSERT INTO `sys_role_menu` VALUES ('1', '1042');
INSERT INTO `sys_role_menu` VALUES ('1', '1043');
INSERT INTO `sys_role_menu` VALUES ('1', '1044');
INSERT INTO `sys_role_menu` VALUES ('1', '1045');
INSERT INTO `sys_role_menu` VALUES ('1', '1046');
INSERT INTO `sys_role_menu` VALUES ('1', '1047');
INSERT INTO `sys_role_menu` VALUES ('1', '1048');
INSERT INTO `sys_role_menu` VALUES ('1', '1049');
INSERT INTO `sys_role_menu` VALUES ('1', '1050');
INSERT INTO `sys_role_menu` VALUES ('1', '1051');
INSERT INTO `sys_role_menu` VALUES ('1', '1052');
INSERT INTO `sys_role_menu` VALUES ('1', '1053');
INSERT INTO `sys_role_menu` VALUES ('1', '1054');
INSERT INTO `sys_role_menu` VALUES ('1', '1055');
INSERT INTO `sys_role_menu` VALUES ('1', '1056');
INSERT INTO `sys_role_menu` VALUES ('1', '1057');
INSERT INTO `sys_role_menu` VALUES ('1', '1059');
INSERT INTO `sys_role_menu` VALUES ('1', '9999');
INSERT INTO `sys_role_menu` VALUES ('1', '10000');
INSERT INTO `sys_role_menu` VALUES ('1', '10001');
INSERT INTO `sys_role_menu` VALUES ('1', '10002');
INSERT INTO `sys_role_menu` VALUES ('1', '10003');
INSERT INTO `sys_role_menu` VALUES ('1', '10004');
INSERT INTO `sys_role_menu` VALUES ('1', '10005');
INSERT INTO `sys_role_menu` VALUES ('1', '10006');
INSERT INTO `sys_role_menu` VALUES ('1', '10007');
INSERT INTO `sys_role_menu` VALUES ('1', '10008');
INSERT INTO `sys_role_menu` VALUES ('1', '10009');
INSERT INTO `sys_role_menu` VALUES ('1', '10010');
INSERT INTO `sys_role_menu` VALUES ('1', '10011');
INSERT INTO `sys_role_menu` VALUES ('1', '10012');
INSERT INTO `sys_role_menu` VALUES ('1', '10013');
INSERT INTO `sys_role_menu` VALUES ('1', '10014');
INSERT INTO `sys_role_menu` VALUES ('1', '10015');
INSERT INTO `sys_role_menu` VALUES ('1', '10016');
INSERT INTO `sys_role_menu` VALUES ('1', '10017');
INSERT INTO `sys_role_menu` VALUES ('1', '10018');
INSERT INTO `sys_role_menu` VALUES ('1', '10019');
INSERT INTO `sys_role_menu` VALUES ('1', '10020');
INSERT INTO `sys_role_menu` VALUES ('1', '10021');
INSERT INTO `sys_role_menu` VALUES ('1', '10023');
INSERT INTO `sys_role_menu` VALUES ('1', '10024');
INSERT INTO `sys_role_menu` VALUES ('1', '10025');
INSERT INTO `sys_role_menu` VALUES ('1', '10026');
INSERT INTO `sys_role_menu` VALUES ('1', '10027');
INSERT INTO `sys_role_menu` VALUES ('1', '10029');
INSERT INTO `sys_role_menu` VALUES ('1', '10030');
INSERT INTO `sys_role_menu` VALUES ('1', '10031');
INSERT INTO `sys_role_menu` VALUES ('1', '10032');
INSERT INTO `sys_role_menu` VALUES ('1', '10033');
INSERT INTO `sys_role_menu` VALUES ('1', '10034');
INSERT INTO `sys_role_menu` VALUES ('1', '10035');
INSERT INTO `sys_role_menu` VALUES ('1', '10036');
INSERT INTO `sys_role_menu` VALUES ('1', '10037');
INSERT INTO `sys_role_menu` VALUES ('1', '10038');
INSERT INTO `sys_role_menu` VALUES ('1', '10039');
INSERT INTO `sys_role_menu` VALUES ('1', '10040');
INSERT INTO `sys_role_menu` VALUES ('1', '10041');
INSERT INTO `sys_role_menu` VALUES ('1', '10042');
INSERT INTO `sys_role_menu` VALUES ('1', '10043');
INSERT INTO `sys_role_menu` VALUES ('100', '2');
INSERT INTO `sys_role_menu` VALUES ('100', '109');
INSERT INTO `sys_role_menu` VALUES ('100', '110');
INSERT INTO `sys_role_menu` VALUES ('100', '111');
INSERT INTO `sys_role_menu` VALUES ('100', '112');
INSERT INTO `sys_role_menu` VALUES ('100', '1046');
INSERT INTO `sys_role_menu` VALUES ('100', '1047');
INSERT INTO `sys_role_menu` VALUES ('100', '1048');
INSERT INTO `sys_role_menu` VALUES ('100', '1049');
INSERT INTO `sys_role_menu` VALUES ('100', '1050');
INSERT INTO `sys_role_menu` VALUES ('100', '1051');
INSERT INTO `sys_role_menu` VALUES ('100', '1052');
INSERT INTO `sys_role_menu` VALUES ('100', '1053');
INSERT INTO `sys_role_menu` VALUES ('100', '1054');
INSERT INTO `sys_role_menu` VALUES ('100', '1055');
INSERT INTO `sys_role_menu` VALUES ('100', '1059');
INSERT INTO `sys_role_menu` VALUES ('100', '9999');
INSERT INTO `sys_role_menu` VALUES ('100', '10000');
INSERT INTO `sys_role_menu` VALUES ('100', '10001');
INSERT INTO `sys_role_menu` VALUES ('100', '10005');
INSERT INTO `sys_role_menu` VALUES ('100', '10006');
INSERT INTO `sys_role_menu` VALUES ('100', '10007');
INSERT INTO `sys_role_menu` VALUES ('100', '10011');
INSERT INTO `sys_role_menu` VALUES ('100', '10012');
INSERT INTO `sys_role_menu` VALUES ('100', '10016');
INSERT INTO `sys_role_menu` VALUES ('100', '10017');
INSERT INTO `sys_role_menu` VALUES ('100', '10018');
INSERT INTO `sys_role_menu` VALUES ('100', '10019');
INSERT INTO `sys_role_menu` VALUES ('100', '10020');
INSERT INTO `sys_role_menu` VALUES ('100', '10021');
INSERT INTO `sys_role_menu` VALUES ('100', '10023');
INSERT INTO `sys_role_menu` VALUES ('100', '10024');
INSERT INTO `sys_role_menu` VALUES ('100', '10025');
INSERT INTO `sys_role_menu` VALUES ('100', '10026');
INSERT INTO `sys_role_menu` VALUES ('100', '10027');
INSERT INTO `sys_role_menu` VALUES ('100', '10029');
INSERT INTO `sys_role_menu` VALUES ('100', '10030');
INSERT INTO `sys_role_menu` VALUES ('100', '10034');
INSERT INTO `sys_role_menu` VALUES ('100', '10035');
INSERT INTO `sys_role_menu` VALUES ('100', '10036');
INSERT INTO `sys_role_menu` VALUES ('100', '10037');
INSERT INTO `sys_role_menu` VALUES ('100', '10038');
INSERT INTO `sys_role_menu` VALUES ('100', '10039');
INSERT INTO `sys_role_menu` VALUES ('100', '10040');
INSERT INTO `sys_role_menu` VALUES ('101', '2');
INSERT INTO `sys_role_menu` VALUES ('101', '109');
INSERT INTO `sys_role_menu` VALUES ('101', '110');
INSERT INTO `sys_role_menu` VALUES ('101', '111');
INSERT INTO `sys_role_menu` VALUES ('101', '112');
INSERT INTO `sys_role_menu` VALUES ('101', '1046');
INSERT INTO `sys_role_menu` VALUES ('101', '1047');
INSERT INTO `sys_role_menu` VALUES ('101', '1048');
INSERT INTO `sys_role_menu` VALUES ('101', '1049');
INSERT INTO `sys_role_menu` VALUES ('101', '1050');
INSERT INTO `sys_role_menu` VALUES ('101', '1051');
INSERT INTO `sys_role_menu` VALUES ('101', '1052');
INSERT INTO `sys_role_menu` VALUES ('101', '1053');
INSERT INTO `sys_role_menu` VALUES ('101', '1054');
INSERT INTO `sys_role_menu` VALUES ('101', '1055');
INSERT INTO `sys_role_menu` VALUES ('101', '1059');
INSERT INTO `sys_role_menu` VALUES ('101', '9999');
INSERT INTO `sys_role_menu` VALUES ('101', '10000');
INSERT INTO `sys_role_menu` VALUES ('101', '10001');
INSERT INTO `sys_role_menu` VALUES ('101', '10002');
INSERT INTO `sys_role_menu` VALUES ('101', '10003');
INSERT INTO `sys_role_menu` VALUES ('101', '10004');
INSERT INTO `sys_role_menu` VALUES ('101', '10005');
INSERT INTO `sys_role_menu` VALUES ('101', '10006');
INSERT INTO `sys_role_menu` VALUES ('101', '10007');
INSERT INTO `sys_role_menu` VALUES ('101', '10008');
INSERT INTO `sys_role_menu` VALUES ('101', '10009');
INSERT INTO `sys_role_menu` VALUES ('101', '10010');
INSERT INTO `sys_role_menu` VALUES ('101', '10011');
INSERT INTO `sys_role_menu` VALUES ('101', '10012');
INSERT INTO `sys_role_menu` VALUES ('101', '10013');
INSERT INTO `sys_role_menu` VALUES ('101', '10014');
INSERT INTO `sys_role_menu` VALUES ('101', '10015');
INSERT INTO `sys_role_menu` VALUES ('101', '10016');
INSERT INTO `sys_role_menu` VALUES ('101', '10017');
INSERT INTO `sys_role_menu` VALUES ('101', '10018');
INSERT INTO `sys_role_menu` VALUES ('101', '10019');
INSERT INTO `sys_role_menu` VALUES ('101', '10020');
INSERT INTO `sys_role_menu` VALUES ('101', '10021');
INSERT INTO `sys_role_menu` VALUES ('101', '10023');
INSERT INTO `sys_role_menu` VALUES ('101', '10024');
INSERT INTO `sys_role_menu` VALUES ('101', '10025');
INSERT INTO `sys_role_menu` VALUES ('101', '10026');
INSERT INTO `sys_role_menu` VALUES ('101', '10027');
INSERT INTO `sys_role_menu` VALUES ('101', '10029');
INSERT INTO `sys_role_menu` VALUES ('101', '10030');
INSERT INTO `sys_role_menu` VALUES ('101', '10031');
INSERT INTO `sys_role_menu` VALUES ('101', '10032');
INSERT INTO `sys_role_menu` VALUES ('101', '10033');
INSERT INTO `sys_role_menu` VALUES ('101', '10034');
INSERT INTO `sys_role_menu` VALUES ('101', '10035');
INSERT INTO `sys_role_menu` VALUES ('101', '10036');
INSERT INTO `sys_role_menu` VALUES ('101', '10037');
INSERT INTO `sys_role_menu` VALUES ('101', '10038');
INSERT INTO `sys_role_menu` VALUES ('101', '10039');
INSERT INTO `sys_role_menu` VALUES ('101', '10040');
INSERT INTO `sys_role_menu` VALUES ('101', '10041');
INSERT INTO `sys_role_menu` VALUES ('101', '10042');
INSERT INTO `sys_role_menu` VALUES ('101', '10043');
INSERT INTO `sys_role_menu` VALUES ('102', '2');
INSERT INTO `sys_role_menu` VALUES ('102', '109');
INSERT INTO `sys_role_menu` VALUES ('102', '110');
INSERT INTO `sys_role_menu` VALUES ('102', '111');
INSERT INTO `sys_role_menu` VALUES ('102', '112');
INSERT INTO `sys_role_menu` VALUES ('102', '1046');
INSERT INTO `sys_role_menu` VALUES ('102', '1047');
INSERT INTO `sys_role_menu` VALUES ('102', '1048');
INSERT INTO `sys_role_menu` VALUES ('102', '1049');
INSERT INTO `sys_role_menu` VALUES ('102', '1050');
INSERT INTO `sys_role_menu` VALUES ('102', '1051');
INSERT INTO `sys_role_menu` VALUES ('102', '1052');
INSERT INTO `sys_role_menu` VALUES ('102', '1053');
INSERT INTO `sys_role_menu` VALUES ('102', '1054');
INSERT INTO `sys_role_menu` VALUES ('102', '1055');
INSERT INTO `sys_role_menu` VALUES ('102', '1059');
INSERT INTO `sys_role_menu` VALUES ('102', '9999');
INSERT INTO `sys_role_menu` VALUES ('102', '10000');
INSERT INTO `sys_role_menu` VALUES ('102', '10001');
INSERT INTO `sys_role_menu` VALUES ('102', '10005');
INSERT INTO `sys_role_menu` VALUES ('102', '10006');
INSERT INTO `sys_role_menu` VALUES ('102', '10007');
INSERT INTO `sys_role_menu` VALUES ('102', '10011');
INSERT INTO `sys_role_menu` VALUES ('102', '10012');
INSERT INTO `sys_role_menu` VALUES ('102', '10016');
INSERT INTO `sys_role_menu` VALUES ('102', '10017');
INSERT INTO `sys_role_menu` VALUES ('102', '10018');

-- ----------------------------
-- Table structure for sys_test
-- ----------------------------
DROP TABLE IF EXISTS `sys_test`;
CREATE TABLE `sys_test` (
  `test_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '测试id',
  `test_name` varchar(30) DEFAULT '' COMMENT '测试名称',
  PRIMARY KEY (`test_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='测试表';

-- ----------------------------
-- Records of sys_test
-- ----------------------------

-- ----------------------------
-- Table structure for sys_user
-- ----------------------------
DROP TABLE IF EXISTS `sys_user`;
CREATE TABLE `sys_user` (
  `user_id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '用户ID',
  `dept_id` bigint(20) DEFAULT NULL COMMENT '部门ID',
  `login_name` varchar(30) NOT NULL COMMENT '登录账号',
  `user_name` varchar(30) NOT NULL COMMENT '用户昵称',
  `user_type` varchar(2) DEFAULT '00' COMMENT '用户类型（00系统用户）',
  `email` varchar(50) DEFAULT '' COMMENT '用户邮箱',
  `phonenumber` varchar(11) DEFAULT '' COMMENT '手机号码',
  `sex` char(1) DEFAULT '0' COMMENT '用户性别（0男 1女 2未知）',
  `avatar` varchar(100) DEFAULT '' COMMENT '头像路径',
  `password` varchar(50) DEFAULT '' COMMENT '密码',
  `salt` varchar(20) DEFAULT '' COMMENT '盐加密',
  `status` char(1) DEFAULT '0' COMMENT '帐号状态（0正常 1停用）',
  `del_flag` char(1) DEFAULT '0' COMMENT '删除标志（0代表存在 2代表删除）',
  `login_ip` varchar(50) DEFAULT '' COMMENT '最后登陆IP',
  `login_date` datetime DEFAULT NULL COMMENT '最后登陆时间',
  `create_by` varchar(64) DEFAULT '' COMMENT '创建者',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  `update_by` varchar(64) DEFAULT '' COMMENT '更新者',
  `update_time` datetime DEFAULT NULL COMMENT '更新时间',
  `remark` varchar(500) DEFAULT '' COMMENT '备注',
  PRIMARY KEY (`user_id`)
) ENGINE=InnoDB AUTO_INCREMENT=104 DEFAULT CHARSET=utf8 COMMENT='用户信息表';

-- ----------------------------
-- Records of sys_user
-- ----------------------------
INSERT INTO `sys_user` VALUES ('1', '103', 'admin', 'admin', '00', 'atomic@qq.com', '18888888888', '0', '2019/06/21/0595196927ed4493600a51fa652f5041.jpg', '5b82e0ce13bad82c3cc203fc3391d173', '9e336e', '0', '0', '127.0.0.1', '2019-07-31 14:42:08', 'admin', '2019-04-13 11:33:00', 'atomic', '2019-07-31 14:42:07', '管理员');
INSERT INTO `sys_user` VALUES ('2', '110', 'atomic', 'Atomic', '00', 'liang.an@teradata.com', '18888888888', '1', '', '8ebb88589a32822a5302fbd16f52c45b', '6f3b0a', '0', '0', '127.0.0.1', '2019-05-19 16:22:35', 'admin', '2019-04-13 11:33:00', 'admin', '2019-05-19 16:22:34', '测试员');
INSERT INTO `sys_user` VALUES ('100', '103', 'atomicx', 'atomicx', '00', '942511600@qq.com', '18835165810', '0', '', '73e122c7b0bf25ae3c48a5ad126b91dc', 'd181c8', '0', '0', '127.0.0.1', '2019-04-28 12:59:24', 'admin', '2019-04-13 23:46:17', 'admin', '2019-04-28 14:18:54', 'atomicx');
INSERT INTO `sys_user` VALUES ('101', '112', 'lijj', 'lijj', '00', 'lijj@si-tech.com', '18222222222', '0', '', '7c21f9510e436158d4d3ec0bc5da55e3', 'd581e4', '0', '0', '127.0.0.1', '2019-06-06 14:46:35', 'admin', '2019-04-25 21:45:15', 'admin', '2019-06-06 14:46:35', '');
INSERT INTO `sys_user` VALUES ('102', '103', 'lushan', '卢山', '00', 'lushan@sx.chinamobile.com', '18888888881', '0', '', '532b365494701048107c6548ced6f881', '1b1836', '0', '0', '127.0.0.1', '2019-04-28 14:33:17', 'admin', '2019-04-27 10:44:19', 'admin', '2019-04-28 14:33:16', '');
INSERT INTO `sys_user` VALUES ('103', '110', 'anliang', 'anliang', '00', 'liang.an1@teradata.com', '18835165866', '0', '', '348cf7854f2a066d2107e378d2a4e780', '7a739d', '0', '0', '127.0.0.1', '2019-04-28 14:22:38', 'admin', '2019-04-28 14:20:36', '', '2019-04-28 14:22:38', '');

-- ----------------------------
-- Table structure for sys_user_online
-- ----------------------------
DROP TABLE IF EXISTS `sys_user_online`;
CREATE TABLE `sys_user_online` (
  `sessionId` varchar(50) NOT NULL DEFAULT '' COMMENT '用户会话id',
  `login_name` varchar(50) DEFAULT '' COMMENT '登录账号',
  `dept_name` varchar(50) DEFAULT '' COMMENT '部门名称',
  `ipaddr` varchar(50) DEFAULT '' COMMENT '登录IP地址',
  `login_location` varchar(255) DEFAULT '' COMMENT '登录地点',
  `browser` varchar(50) DEFAULT '' COMMENT '浏览器类型',
  `os` varchar(50) DEFAULT '' COMMENT '操作系统',
  `status` varchar(10) DEFAULT '' COMMENT '在线状态on_line在线off_line离线',
  `start_timestamp` datetime DEFAULT NULL COMMENT 'session创建时间',
  `last_access_time` datetime DEFAULT NULL COMMENT 'session最后访问时间',
  `expire_time` int(5) DEFAULT '0' COMMENT '超时时间，单位为分钟',
  PRIMARY KEY (`sessionId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='在线用户记录';

-- ----------------------------
-- Records of sys_user_online
-- ----------------------------

-- ----------------------------
-- Table structure for sys_user_post
-- ----------------------------
DROP TABLE IF EXISTS `sys_user_post`;
CREATE TABLE `sys_user_post` (
  `user_id` bigint(20) NOT NULL COMMENT '用户ID',
  `post_id` bigint(20) NOT NULL COMMENT '岗位ID',
  PRIMARY KEY (`user_id`,`post_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='用户与岗位关联表';

-- ----------------------------
-- Records of sys_user_post
-- ----------------------------
INSERT INTO `sys_user_post` VALUES ('1', '1');
INSERT INTO `sys_user_post` VALUES ('2', '3');
INSERT INTO `sys_user_post` VALUES ('100', '2');
INSERT INTO `sys_user_post` VALUES ('101', '4');
INSERT INTO `sys_user_post` VALUES ('102', '1');
INSERT INTO `sys_user_post` VALUES ('103', '4');

-- ----------------------------
-- Table structure for sys_user_role
-- ----------------------------
DROP TABLE IF EXISTS `sys_user_role`;
CREATE TABLE `sys_user_role` (
  `user_id` bigint(20) NOT NULL COMMENT '用户ID',
  `role_id` bigint(20) NOT NULL COMMENT '角色ID',
  PRIMARY KEY (`user_id`,`role_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='用户和角色关联表';

-- ----------------------------
-- Records of sys_user_role
-- ----------------------------
INSERT INTO `sys_user_role` VALUES ('1', '1');
INSERT INTO `sys_user_role` VALUES ('2', '101');
INSERT INTO `sys_user_role` VALUES ('100', '101');
INSERT INTO `sys_user_role` VALUES ('101', '100');
INSERT INTO `sys_user_role` VALUES ('102', '1');
INSERT INTO `sys_user_role` VALUES ('103', '100');
